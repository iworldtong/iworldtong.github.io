<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>iworld's Blog</title>
    <description>世界再大，还是遇见了你</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Wed, 11 Sep 2019 17:25:04 +0800</pubDate>
    <lastBuildDate>Wed, 11 Sep 2019 17:25:04 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>【论文整理】Temporal Sentence Localization in Video方向近期总结</title>
        <description>&lt;h3 id=&quot;0introduce&quot;&gt;0.Introduce&lt;/h3&gt;

&lt;p&gt;Temporal Sentence Localization in Video，该任务内容为给定一个query（包含对activity的描述），在一段视频中找到描述动作（事件）发生的起止时间，如下图所示：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;200&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1554267644/Awesome%20Language%20Moment%20Retrieval/TALL_-_2.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;该任务在17年被提出，经过两年发展，目前主流工作大致分为以下三种思路：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#1&quot;&gt;Proposal-based&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2&quot;&gt;Proposal-free&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3&quot;&gt;Reinforcement-learning-based&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1proposal-based&quot;&gt;&lt;span id=&quot;1&quot;&gt;1.P&lt;/span&gt;roposal-based&lt;/h3&gt;

&lt;h3 id=&quot;2proposal-free&quot;&gt;&lt;span id=&quot;2&quot;&gt;2.Proposal-free&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;上面介绍的方法都是&lt;strong&gt;“scan and localize”&lt;/strong&gt;这种结构的，该框架在早期虽然取得了一定效果，但目前看来仍存在很多局限性，下面列举几条比较明显的缺点：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;用滑动窗等方法产生video clip之间是独立的，打断了隐含的时序结构和视频整体的全局信息，&lt;strong&gt;不能有效利用整个视频序列&lt;/strong&gt;；&lt;/li&gt;
  &lt;li&gt;一些方法将整个句子编码成一个全局特征（coarse feature），其中&lt;strong&gt;某些对定位至关重要的句子信息容易被忽略或未被充分挖掘&lt;/strong&gt;；&lt;/li&gt;
  &lt;li&gt;为提高性能，滑动窗法往往需要对视频密集采样，造成&lt;strong&gt;极大的计算冗余&lt;/strong&gt;；&lt;/li&gt;
  &lt;li&gt;预定义的clips，使得&lt;strong&gt;预测结果变长扩展变得困难&lt;/strong&gt;；&lt;/li&gt;
  &lt;li&gt;。。。。&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;21-ablr&quot;&gt;2.1 ABLR&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1804.07014&quot;&gt;《To Find Where You Talk: Temporal Sentence Localization in Video with Attention Based Location Regression》&lt;/a&gt;，发表于AAAI19。&lt;/p&gt;

&lt;p&gt;本文主要贡献如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;直接根据句子对整个视频预测起止时间；&lt;/li&gt;
  &lt;li&gt;提出了一种multi-modal co-attention机制&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;模型框架如下：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568021479/iblog/LMR%20summary/ABLR-1.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;为了使不同视频片段之间能够建立关联，将视频均分为$N_{split}$个clip分别得到C3D特征后继续送给Bi-LSTM。之后进行注意力计算，其计算公式如下：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{aligned} \mathbf{H} &amp;=\tanh \left(\mathbf{U}_{z} \mathbf{Z}+\left(\mathbf{U}_{g} \mathbf{g}\right) \mathbf{1}^{T}+\mathbf{b}_{a} \mathbf{1}^{T}\right) \\ \mathbf{a}^{z} &amp;=\operatorname{softmax}\left(\mathbf{u}_{a}^{T} \mathbf{H}\right) \\ \tilde{\mathbf{z}} &amp;=\sum a_{j}^{z} \mathbf{z}_{j} \end{aligned} %]]&gt;&lt;/script&gt;

&lt;p&gt;Multi-Modal Co-Attention Interaction过程共有三步：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;“Where to look”&lt;/strong&gt;，对视频进行注意力加权，$\mathbf{Z}=\mathbf{V},\mathbf{g}=mean_pool(\mathbf{S})$&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;“Which words to guide”&lt;/strong&gt;，根据加权后的视频，对句子注意力加权，$\mathbf{Z}=\mathbf{S},\mathbf{g}=\widetilde{v}$&lt;/li&gt;
  &lt;li&gt;根据加权后的句子特征，再次对视频进行注意力加权，$\mathbf{Z}=\mathbf{V}_a,\mathbf{g}=\widetilde{s}$&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;最终进行坐标预测时作者设计了两种计算方式：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Attention weight based regression&lt;/strong&gt;：直接用注意力权重$\mathbf{a}^V$输入FC输出坐标&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Attention feature based regression&lt;/strong&gt;：将加权拼接后的$[\widetilde{v}||\widetilde{s}]$送到一双层FC输出坐标&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;为了增强事件内部的clip注意力权重，作者还设计了一种attention calibration loss（见下式），与reg loss一起构成总的损失函数。&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;L_{c a l}=-\sum_{i=1}^{K} \frac{\sum_{j=1}^{M} m_{i, j} \log \left(a_{j}^{V_{i}}\right)}{\sum_{j=1}^{M} m_{i, j}}&lt;/script&gt;

&lt;p&gt;在模型完整（full）的情况下，前者效果更好：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;300&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568021479/iblog/LMR%20summary/ABLR-2.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;同时实验也说明了这种Proposal-free的方法更加高效：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568021479/iblog/LMR%20summary/ABLR-3.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;：本文提出的注意力机制比较繁琐，有优化的空间。&lt;/p&gt;

&lt;h4 id=&quot;22-excl&quot;&gt;2.2 ExCL&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1904.02755&quot;&gt;《ExCL: Extractive Clip Localization Using Natural Language Descriptions》&lt;/a&gt;，发表于NAACL19。&lt;/p&gt;

&lt;p&gt;本文通过text和video两模态之间的交互来直接预测起止时间，text特征使用text Bi-LSTM最后的隐含层状态$\mathbf{h}^T$，具体有如下三种多模态交互方式：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;350&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568084144/iblog/LMR%20summary/ExCL-1.png&quot; /&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;MLP predictor&lt;/strong&gt;：在每一时间步，使用拼接的$[\mathbf{h}_t^V|\mathbf{h}^T]$，输入MLP分别得到$S_{start}(t),S_{end}(t)$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Tied LSTM predictor&lt;/strong&gt;：上述拼接的特征首先经过一个Bi-LSTM，得到$\mathbf{h}_t^P$，将$[\mathbf{h}_t^P|\mathbf{h}_t^P|\mathbf{h}^T]$送给MLP&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Conditioned-LSTM predictor&lt;/strong&gt;：由于前面两方法没有考虑$S_{start}(t)$与$S_{end}(t)$的时间次序关系，因此在计算结束时间时，引入起始时间的信息，以期使输出更加合理，公式如下：&lt;/p&gt;

    &lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{aligned} \mathbf{h}_{t}^{P_{0}} &amp;=\mathrm{LSTM}_{\text {start }}\left(\left[\mathbf{h}_{t}^{V} ; \mathbf{h}^{T}\right], \mathbf{h}_{t-1}^{P_{0}}\right) \\ \mathbf{h}_{t}^{P_{1}} &amp;=\mathrm{LSTM}_{\text {end }}\left(\mathbf{h}_{t}^{P_{0}}, \mathbf{h}_{t-1}^{P_{1}}\right) \\ S_{\text {start }}(t) &amp;=\mathbf{W}_{s}\left(\left[\mathbf{h}_{t}^{P_{0}} ; \mathbf{h}_{t}^{V} ; \mathbf{h}^{T}\right]\right)+\mathbf{b}_{s} \\ S_{\text {end }}(t) &amp;=\mathbf{W}_{e}\left(\left[\mathbf{h}_{t}^{P_{1}} ; \mathbf{h}_{t}^{V} ; \mathbf{h}^{T}\right]\right)+\mathbf{b}_{e} \end{aligned} %]]&gt;&lt;/script&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;实验结果如下：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;400&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568084144/iblog/LMR%20summary/ExCL-2.png&quot; /&gt;&lt;/div&gt;

&lt;h4 id=&quot;23-proposal-free-with-guided-attention&quot;&gt;2.3 Proposal-free with Guided Attention&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1908.07236&quot;&gt;《Proposal-free Temporal Moment Localization of a Natural-Language Query in Video using Guided Attention》&lt;/a&gt;，目前在Arxiv。&lt;/p&gt;

&lt;p&gt;本文主要贡献有三点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A dynamic filter融合多模态特征，目的是根据给定的句子，动态的对视频特征进行过滤；&lt;/li&gt;
  &lt;li&gt;一种新的损失函数，指导模型关注视频中最相关的部分；&lt;/li&gt;
  &lt;li&gt;使用soft labels建模标签的模糊性。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;模型整体结构如下（编码句子特征时使用mean pool）：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;300&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568086287/iblog/LMR%20summary/others-1.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;Guided Attention计算公式如下（$\mathbf{G}$为视频特征）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\begin{array}{l}
{A=\operatorname{softmax}\left(\frac{G^{\top} \theta(\overline{h})}{\sqrt{n}}\right) \in \mathbb{R}^{n}} \\ 
{\overline{G}=A \odot G \in \mathbb{R}^{n \times d}} \\

{其中\ \theta(x)=\tanh \left(W_{\theta} x+b_{\theta}\right) \in \mathbb{R}^{d}}
\end{array}&lt;/script&gt;

&lt;p&gt;作者假设segments外部的视频更不可能对训练有帮助，因此设计att loss使外部的注意力更小（类似的思想见ABLR）：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;L_{a t t}=-\sum_{i=1}^{n}\left(1-\delta_{\tau^{s} \leq i \leq \tau^{e}}\right) \log \left(1-a_{i}\right)&lt;/script&gt;

&lt;p&gt;考虑到即使对人来说，识别一段事件发生的起止时间也是非常模糊的，有很大的主观成分，因此作者使用了soft labels，针对概率分布进行优化。&lt;/p&gt;

&lt;p&gt;设$\hat{\boldsymbol{\tau}}^{s}, \hat{\boldsymbol{\tau}}^{e} \in \mathbb{R}^{n}$是得到的预测分布，${\boldsymbol{\tau}}^{s}, {\boldsymbol{\tau}}^{e}$是真实标签分布，则有$\boldsymbol{\tau}^{s} \sim \mathcal{N}\left(\tau^{s}, 1\right) \in \mathbb{R}^{n}，\boldsymbol{\tau}^{s} \sim \mathcal{N}\left(\tau^{e}, 1\right) \in \mathbb{R}^{n}$，使用&lt;strong&gt;KL散度&lt;/strong&gt;进行优化：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;L_{K L}=D_{\mathrm{KL}}\left(\hat{\tau}^{s} \| \tau^{s}\right)+D_{\mathrm{KL}}\left(\hat{\tau}^{e} \| \tau^{e}\right)&lt;/script&gt;

&lt;p&gt;最终损失函数：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;L o s s=L_{K L}+L_{a t t}&lt;/script&gt;

&lt;p&gt;实验结果：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;400&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568086287/iblog/LMR%20summary/others-2.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;实验说明了soft labels确实有效：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568088783/iblog/LMR%20summary/others-3.png&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;3reinforcement-learning-based&quot;&gt;&lt;span id=&quot;3&quot;&gt;3.Reinforcement-learning-based&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;强化学习的思路同样也是为了解决proposal-based方法对长视频提取密集、冗余的clip特征。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;250&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188044/iblog/LMR%20summary/LMR-RL-1.png&quot; /&gt;&lt;/div&gt;

&lt;h4 id=&quot;31-tripnet&quot;&gt;3.1 TripNet&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1904.09936&quot;&gt;《Tripping through time: Efficient Localization of Activities in Videos》&lt;/a&gt;，Arxiv。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;We are motivated by human annotators who observe a short clip and make a decision to skip forward or backward in the video by some number of frames, until they can narrow in on the target clip.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;人在做此项任务时，往往首先从视频开始粗略的看，在此过程中采样到一些列稀疏的且与描述相关的帧，之后再进行frame-by-frame的定位。受此启发，本文提出了一个端到端、gated-attention的强化学习框架。主要思想是先初始化一个clip，根据当前状态计算当前策略，调整窗口直至靠近目标片段。&lt;/p&gt;

&lt;p&gt;模型分为两个主要部分：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;the state processing module&lt;/strong&gt;：计算当前状态的visual-linguistic编码特征&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;the policy learning module&lt;/strong&gt;：生成action policy&lt;/li&gt;
&lt;/ul&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568106487/iblog/LMR%20summary/tripnet-1.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;计算状态$s_t$使用了注意力的形式（见state processing module），注意作者在提取visual feature时使用的是C3D+mean_pool。&lt;/p&gt;

&lt;p&gt;使用全连接网络计算value与policy。为了使模型尽快定位到目标片段，value中的reward除了计算当前窗口与标签的IOU，还添加了一个&lt;strong&gt;随搜索步数$t$增长的负奖励&lt;/strong&gt;。对于policy，作者定义了7种动作（$W_{start},W_{end}$分别向前/向后移动$N/5,N/10$，一秒范围的帧或终止），policy输出的就是当前动作在该动作空间中的概率分布。&lt;/p&gt;

&lt;p&gt;实验结果：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568106487/iblog/LMR%20summary/tripnet-24.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;一些搜索过程统计与可视化：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;600&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568106487/iblog/LMR%20summary/tripnet-5.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;效率验证：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;120&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568106487/iblog/LMR%20summary/tripnet-6.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;：计算当前状态时只考虑了当前窗口内的视频特征，没有考虑全局特征。&lt;/p&gt;

&lt;h4 id=&quot;32-sm-rl&quot;&gt;3.2 SM-RL&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://openaccess.thecvf.com/content_CVPR_2019/papers/Wang_Language-Driven_Temporal_Activity_Localization_A_Semantic_Matching_Reinforcement_Learning_Model_CVPR_2019_paper.pdf&quot;&gt;《Language-driven Temporal Activity Localization: A Semantic Matching Reinforcement Learning Model》&lt;/a&gt;，发表于CVPR19。&lt;/p&gt;

&lt;p&gt;video与sentence之间有着很大的语义鸿沟，但考虑到sentence中往往有一些semantic concept（如actor，action和object等），为了通过语义层面使video与sentence之间更加容易匹配，作者提出了一种基于强化学习的semantic matching方法。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568171060/iblog/LMR%20summary/SM-RL-1.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;在计算semantic concept时作者对比了&lt;strong&gt;multi-label classification based model&lt;/strong&gt;（通过描述建立标签，如nouns，verbs等）与&lt;strong&gt;faster r-cnn based model&lt;/strong&gt;（在visual gnome上预训练）两种生成semantic的方法，后者效果更优。&lt;/p&gt;

&lt;p&gt;损失函数对比了&lt;strong&gt;boundary regression loss&lt;/strong&gt;与&lt;strong&gt;frame-level regression loss&lt;/strong&gt;，以下为实验结果。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568171060/iblog/LMR%20summary/SM-RL-2.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;：有点像视频描述中&lt;a href=&quot;https://arxiv.org/abs/1811.02765v1&quot;&gt;topic-embed&lt;/a&gt;模型，semantic标签预测的准确性可能对模型性能影响很大。&lt;/p&gt;

&lt;h4 id=&quot;33-read-watch-and-move&quot;&gt;3.3 Read, Watch, and Move&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://arxiv.org/abs/1901.06829&quot;&gt;《Read, Watch, and Move: Reinforcement Learning for Temporally Grounding Natural Language Descriptions in Videos》&lt;/a&gt;，发表于AAAI19。&lt;/p&gt;

&lt;p&gt;本文模型与TripNet较为相似，模型框架如下：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188046/iblog/LMR%20summary/watch-1.png&quot; /&gt;&lt;/div&gt;
&lt;p&gt;计算当前状态时，除了局部特征，还考虑了整个视频的全局特征。此外，作者实验发现加入location feature可以有效提高指标。（见observation network）&lt;/p&gt;

&lt;p&gt;对强化学习，在第$t$步，如果当前的tIoU增大，则给一个正奖励；减小则无；当tIoU为负值时（即预测起始时间在结束时间之后），给负奖励。一般来说，策略网络搜索的步数更多，结果可能会更加精确，但随之而来的计算代价也会增大。为缓解这个问题，作者又设置了随执行步数增大而增大的惩罚。则第$t$步的reward计算公式如下：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
r_{t}=\left\{\begin{array}{ll}{1-\phi * t,} &amp; {t I o U^{(t)}&gt;t I o U^{(t-1)} \geq 0} \\ {-\phi * t,} &amp; {0 \leq t I o U^{(t)} \leq t \operatorname{IoU}^{(t-1)}} \\ {-1-\phi * t,} &amp; {\text { otherwise }}\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;p&gt;值得注意的是，为了使模型学习到更好的state vector，作者将&lt;strong&gt;supervised learning&lt;/strong&gt;（L1 tIoU regression loss + L1 location regression loss） 与&lt;strong&gt;reinforcement learning&lt;/strong&gt;（actor-critic algorithm）相结合，组成一个&lt;strong&gt;multi-task learning&lt;/strong&gt;框架，提高模型性能。&lt;/p&gt;

&lt;p&gt;实验结果：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188046/iblog/LMR%20summary/watch-2.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;对比实验：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img width=&quot;350&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188046/iblog/LMR%20summary/watch-3.png&quot; /&gt;
&lt;img width=&quot;350&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188046/iblog/LMR%20summary/watch-4.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;最后作者分析了location feature、监督学习中两个不同损失对指标的影响：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;200&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1568188046/iblog/LMR%20summary/watch-5.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;：observation network融合不同特征的方法还有待挖掘。&lt;/p&gt;
</description>
        <pubDate>Mon, 09 Sep 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/09/09/%E8%AE%BA%E6%96%87%E6%95%B4%E7%90%86-Temporal-Sentence-Localization-in-Video%E6%96%B9%E5%90%91%E8%BF%91%E6%9C%9F%E6%80%BB%E7%BB%93/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/09/09/%E8%AE%BA%E6%96%87%E6%95%B4%E7%90%86-Temporal-Sentence-Localization-in-Video%E6%96%B9%E5%90%91%E8%BF%91%E6%9C%9F%E6%80%BB%E7%BB%93/</guid>
        
        <category>Deep Learning</category>
        
        <category>Video Understanding</category>
        
        
      </item>
    
      <item>
        <title>R-C3D.pytorch源码详解</title>
        <description>&lt;p&gt;本文结合&lt;a href=&quot;https://arxiv.org/abs/1703.07814&quot;&gt;R-C3D&lt;/a&gt;原理及其&lt;a href=&quot;https://github.com/VisionLearningGroup/R-C3D&quot;&gt;Caffe实现&lt;/a&gt;，介绍了&lt;a href=&quot;https://github.com/sunnyxiaohu/R-C3D.pytorch&quot;&gt;R-C3D.pytorch&lt;/a&gt;源代码的各部分功能。&lt;/p&gt;

&lt;h3 id=&quot;0目录&quot;&gt;0.目录&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1&quot;&gt;1.数据预处理&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2&quot;&gt;2.数据集加载&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3&quot;&gt;3.R-C3D框架&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1数据预处理&quot;&gt;&lt;span id=&quot;1&quot;&gt;1.数据预处理&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;目标：滑动窗法采样数据，生成pkl文件。&lt;/p&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;preprocess&lt;/code&gt;文件夹下，有分别对THUMOS14、ActivityNet和Charades三个数据集的预处理文件，文件名为&lt;code class=&quot;highlighter-rouge&quot;&gt;generate_roidb_training.py&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;generate_roidb_validation.py&lt;/code&gt;。这里主要关注针对不同数据集，滑动窗的大小设置。预处理文件中有如下部分：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# for ActivityNet
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;FPS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;WINS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LENGTH&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;论文根据不同数据集中行为片段的时长统计信息，设置对三个数据集采样的FPS分别为25、3和5。而一开始，分帧程序对所有视频的fps均为25（见&lt;code class=&quot;highlighter-rouge&quot;&gt;generate_frames.py&lt;/code&gt;，这样比较通用，方便测试其他模型），因此需要进行一定转换。&lt;/p&gt;

&lt;p&gt;具体的取帧部分在&lt;code class=&quot;highlighter-rouge&quot;&gt;lib/roi_data_layer/minibatch.py&lt;/code&gt;中的&lt;code class=&quot;highlighter-rouge&quot;&gt;_get_video_blob&lt;/code&gt;函数中（详见后文介绍），帧之间的采样间隔step等于预处理文件中的stride。&lt;/p&gt;

&lt;p&gt;以ActivityNet为例，stride就是上面程序中的8。而25//8的采样率正好约为论文中的3fps，因此上面的WINS设置方式实际为&lt;code class=&quot;highlighter-rouge&quot;&gt; WINS = [LENGTH * FPS // sample_fps] &lt;/code&gt;，其中sample_fps为真正的采样率，需要根据不同数据集进行设置。&lt;/p&gt;

&lt;h3 id=&quot;2数据集加载&quot;&gt;&lt;span id=&quot;2&quot;&gt;2.数据集加载&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;主要涉及&lt;code class=&quot;highlighter-rouge&quot;&gt;lib/roi_data_layer&lt;/code&gt;文件下的&lt;code class=&quot;highlighter-rouge&quot;&gt;roibatchLoader.py&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;minibatch.py&lt;/code&gt;两个文件。&lt;/p&gt;

&lt;p&gt;对于&lt;code class=&quot;highlighter-rouge&quot;&gt;roibatchLoader.py&lt;/code&gt;，其返回数据为一段滑动窗对应数据（窗内采样图像序列和窗标签，其中标签为（max_num_box, x1, x2, cls），表示对当前滑动窗所有符合条件的ground truth boxes，也即回归分类目标）。若当前符合条件的gt boxes数量不足max_num_box，则用0填充；多余则截断。&lt;/p&gt;

&lt;p&gt;对于&lt;code class=&quot;highlighter-rouge&quot;&gt;minibatch.py&lt;/code&gt;，其输入为长度为1的滑动窗列表，即”Single batch only”，其中的random_scale_inds参数也只是选择一种窗口长度（&lt;code class=&quot;highlighter-rouge&quot;&gt;len(WINS)==1&lt;/code&gt;）。&lt;/p&gt;

&lt;p&gt;在具体取帧时，&lt;code class=&quot;highlighter-rouge&quot;&gt;_get_video_blob&lt;/code&gt;函数中设置了不同的采样方式（稀疏或均匀抽帧）：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cfg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TEMP_SPARSE_SAMPLING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;       
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'train'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;segment_offsets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;npr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;segment_offsets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;            
  &lt;span class=&quot;n&quot;&gt;segment_offsets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;video_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;对每个滑动窗，对其framestamps以sample_fps进行采样，并添加偏移segment_offsets，由于一段滑动窗长度为&lt;code class=&quot;highlighter-rouge&quot;&gt;win = LENGTH * FPS // sample_fps&lt;/code&gt;，抽帧的间隔为&lt;code class=&quot;highlighter-rouge&quot;&gt;step = FPS // sample_fps&lt;/code&gt;，则输出的video大小为&lt;code class=&quot;highlighter-rouge&quot;&gt;(LENGTH, cfg.TRAIN.CROP_SIZE, cfg.TRAIN.CROP_SIZE, 3)&lt;/code&gt;，若采得总帧数不足&lt;code class=&quot;highlighter-rouge&quot;&gt;LENGTH&lt;/code&gt;（窗宽小于&lt;code class=&quot;highlighter-rouge&quot;&gt;LENGTH&lt;/code&gt;，代表此时滑动窗口溢出视频边界）则以最后一帧向后复制。&lt;/p&gt;

&lt;p&gt;最终返回的data大小为&lt;code class=&quot;highlighter-rouge&quot;&gt;(1, channel, video_length, height, width)&lt;/code&gt;。&lt;/p&gt;

&lt;h3 id=&quot;3r-c3d框架&quot;&gt;&lt;span id=&quot;3&quot;&gt;3.R-C3D框架&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;以C3D为例。&lt;/p&gt;

&lt;p&gt;R-C3D网络的初始化代码如下：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;	&lt;span class=&quot;c1&quot;&gt;# initilize the network here.
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'c3d'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c3d_tdcnn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pretrained&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'res18'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resnet_tdcnn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pretrained&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'res34'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resnet_tdcnn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pretrained&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'res50'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resnet_tdcnn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pretrained&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'eco'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eco_tdcnn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pretrained&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;        
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;network is not defined&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;tdcnn_demo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_architecture&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 初始化模型以及权重，见 lib/model/tdcnn/tdcnn.py
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;c3d_tdcnn继承自_TDCNN，主要作用是在tdcnn的基础上定义了下面四部分：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;self.RCNN_base&lt;/strong&gt;：对输入视频提取特征图，取C3D base到conv5b为止（不含max pooling，C3D网络定义见&lt;code class=&quot;highlighter-rouge&quot;&gt;lib/model/tdcnn/c3d.py&lt;/code&gt;），当输入大小为$(bsz, C, L, H, W)$时，对应的输出大小为$(bsz,512,L/8,H/16,W/16)$。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;self.RCNN_top&lt;/strong&gt;：为C3D classifier，只取了第一个FC层（即fc6，包括ReLU与Dropout），输出为4096。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;self.RCNN_cls_score&lt;/strong&gt;：输入4096维特征向量，得到分类得分。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;self.RCNN_twin_pred&lt;/strong&gt;：输入4096维特征向量，得到每类的检测边界。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;_TDCNN主要定义了rpn的相关结构：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;self.RCNN_rpn&lt;/strong&gt;
定义见&lt;code class=&quot;highlighter-rouge&quot;&gt;lib/model/rpn/rpn.py&lt;/code&gt;，输入self.RCNN_base得到的特征图，输出rois, rpn_cls_prob, rpn_twin_pred, self.rpn_loss_cls, self.rpn_loss_twin, self.rpn_label, self.rpn_loss_mask。&lt;/p&gt;

    &lt;p&gt;假设输入特征图大小为$(bsz, 512, 96, 7, 7)$，首先经过self.RPN_Conv1、self.RPN_Conv2和self.RPN_output_pool，输出rpn_output_pool大小为$(bsz, 512, 96, 1, 1)$，再进行后续处理。&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;self.RPN_cls_score&lt;/strong&gt;：计算分类得分，对每一个time anchor（这里为96），有$2(bg/fg) \times 10 (anchors)$个输出，因此$(bsz, 512, 96, 1, 1) \rightarrow (bsz, 2*10, 96, 1, 1)$。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;self.RPN_twin_pred&lt;/strong&gt;：计算坐标，有$2(coords）\times 10 (anchors)$个输出，因此$(bsz, 512, 96, 1, 1) \rightarrow (bsz, 2*10, 96, 1, 1)$。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;self.RPN_proposal&lt;/strong&gt;&lt;/p&gt;

        &lt;p&gt;通过前面得到的rpn_cls_prob和twin_pred，计算rois。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;self.RPN_anchor_target&lt;/strong&gt;&lt;/p&gt;

        &lt;p&gt;训练阶段使用，得到self.rpn_label，self.rpn_loss_cls，self.rpn_loss_twin。&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;self.RCNN_proposal_target&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;定义见&lt;code class=&quot;highlighter-rouge&quot;&gt;lib/model/rpn/proposal_target_layer_cascade.py&lt;/code&gt;，用于训练阶段。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;self.RCNN_roi_temporal_pool&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;self.RCNN_attention&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;R-C3D前向计算的主要代码如下：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;feats_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rpn_loss_cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rpn_loss_twin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_rpn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feats_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# if it is training phase, then use ground truth twins for refining
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_training&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois_label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois_target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois_inside_ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois_outside_ws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_proposal_target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gt_twins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# do roi pooling based on predicted rois
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_pool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_roi_temporal_pool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;USE_ATTENTION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_attention&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
  
&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;cls_score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_cls_score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cls_prob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;softmax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cls_score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;twin_pred&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_twin_pred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pooled_feat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_training&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;compute&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_loss_cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_loss_twin&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;according&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;twin_pred&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;training&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;        
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cls_prob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;twin_pred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rpn_loss_cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rpn_loss_twin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_loss_cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCNN_loss_twin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois_label&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rois&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cls_prob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;twin_pred&lt;/span&gt; 
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Mon, 19 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/19/R-C3D.pytorch%E6%BA%90%E7%A0%81%E8%AF%A6%E8%A7%A3/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/19/R-C3D.pytorch%E6%BA%90%E7%A0%81%E8%AF%A6%E8%A7%A3/</guid>
        
        <category>Deep Learning</category>
        
        <category>Video Understanding</category>
        
        
      </item>
    
      <item>
        <title>名为物理，读作中二</title>
        <description>&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/1.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558272968/iblog/openday/2019-05-19-%E5%90%8D%E4%B8%BA%E7%89%A9%E7%90%86_%E8%AF%BB%E4%BD%9C%E4%B8%AD%E4%BA%8C.png&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/2.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/3.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/4.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/5.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/6.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/7.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/8.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/9.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/10.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/11.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/12.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/13.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/14.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/15.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/16.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/17.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/18.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/19.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/20.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/21.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/22.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1558271628/iblog/openday/23.jpg&quot; /&gt;&lt;/div&gt;

</description>
        <pubDate>Sun, 19 May 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/05/19/%E5%90%8D%E4%B8%BA%E7%89%A9%E7%90%86-%E8%AF%BB%E4%BD%9C%E4%B8%AD%E4%BA%8C/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/05/19/%E5%90%8D%E4%B8%BA%E7%89%A9%E7%90%86-%E8%AF%BB%E4%BD%9C%E4%B8%AD%E4%BA%8C/</guid>
        
        <category>存档点</category>
        
        
      </item>
    
      <item>
        <title>从童年起，我便独自一人，照顾着历代星辰</title>
        <description>&lt;p&gt;1&lt;/p&gt;

&lt;p&gt;“你现在能听见声音了吗？”，我缓缓摘下实验仪器，听见了整个星球上数万亿生物涌动的心跳，以及耳后从遥远星系间传来的细微低语。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《进化》&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;2&lt;/p&gt;

&lt;p&gt;“说出来你可能不信”，她抬起头望见站在自己面前微笑的陌生人，”这是我们第三千次在这里相遇”。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《时间漫游者》&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;3&lt;/p&gt;

&lt;p&gt;随着太阳系淹没在一片耀眼的火光之中，最后一艘载人飞船被推向太空。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《新家园》&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;4&lt;/p&gt;

&lt;p&gt;“你输了”，他最终落子，此时棋盘上已无一颗白目。&lt;/p&gt;

&lt;p&gt;整个宇宙重新归于黑暗。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《残局》&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;5&lt;/p&gt;

&lt;p&gt;我醒来后发现这次宇宙的半衰期只有一秒，但在第一个文明诞生的万分之一秒前，我就已经适应了时间的流逝。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《四维陷阱》&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;6&lt;/p&gt;

&lt;p&gt;说出来你可能不信，这是你第三千次阅读这行文字。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;——《记忆衰减》&lt;/p&gt;
</description>
        <pubDate>Fri, 10 May 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/05/10/%E4%BB%8E%E7%AB%A5%E5%B9%B4%E8%B5%B7-%E6%88%91%E4%BE%BF%E7%8B%AC%E8%87%AA%E4%B8%80%E4%BA%BA-%E7%85%A7%E9%A1%BE%E7%9D%80%E5%8E%86%E4%BB%A3%E6%98%9F%E8%BE%B0/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/05/10/%E4%BB%8E%E7%AB%A5%E5%B9%B4%E8%B5%B7-%E6%88%91%E4%BE%BF%E7%8B%AC%E8%87%AA%E4%B8%80%E4%BA%BA-%E7%85%A7%E9%A1%BE%E7%9D%80%E5%8E%86%E4%BB%A3%E6%98%9F%E8%BE%B0/</guid>
        
        <category>一言</category>
        
        
      </item>
    
      <item>
        <title>欢迎光临瓦尔哈拉——《VA-11 Hall-A》</title>
        <description>&lt;p&gt;&lt;em&gt;前方高能，一大杯剧透&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;In a city that should not exist.&lt;/p&gt;

  &lt;p&gt;这是一座不应该存在于世的城市&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;Where individual liberty is nothing but a daydream.&lt;/p&gt;

  &lt;p&gt;这里人的自由不过是可悲的妄想&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;Only hope remains.&lt;/p&gt;

  &lt;p&gt;但是希望仍然没有消亡&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;This is a story about people daring to survive.&lt;/p&gt;

  &lt;p&gt;这是一个关于那些敢于挣扎求生的人们的故事&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;Daring to find happiness.&lt;/p&gt;

  &lt;p&gt;敢于寻求自己幸福的人们的故事&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556765783/iblog/VA11/1.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;故事背景：巨型企业垄断了包括政治和司法在内的一切，民生成为了商业游戏的一部分。尖端科技的成果仅能惠及富裕的社会上层，更恶劣的一部分则用于镇压对现状不满的民众。另一方面，增强义肢、芯片植入、纳米机械、人工智能和机器人已经融入了日常生活，但人类仍在在与顽疾、污染、灾害以及同类斗争……&lt;/p&gt;

&lt;p&gt;游戏讲述了Jill——一名”Valhalla”酒吧的调酒师——在工作时遇见的形形色色的人，体会着Glitch City中人与人之间的爱恨情仇，同时自身成长的故事。游戏的世界观基于顾客们讲述的故事来构建，虽然残破不堪但尚能一窥端倪。&lt;/p&gt;

&lt;p&gt;打开游戏，会出现制作组的提示，建议手里拿杯喝的找个舒服的坐姿惬意的游玩。事实上这确实是一个值得这样慢慢玩味的视觉小说。太过焦躁，反而失了这间酒吧的格调。&lt;/p&gt;

&lt;h4 id=&quot;有用即是真理&quot;&gt;&lt;strong&gt;有用即是真理&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;《VA-11 HALL-A：Cyberpunk Bartender Action》所描绘的赛博朋克世界就像一个大熔炉。科技虽然在高度进步，但同时人性似乎也被淡化了，实用主义成为社会的主流。仿生人既然通过了图灵测试，那么我们便接受他们，将他们看做社会的一员，无关于他们的机械属性。旧时代很多人无法接受的同性恋，在这里也会被觉得理所当然。纳米机械即使可能会监控束缚我，但既然能监测我的健康状况消除我的疾病，那么我便坦然接受。“身体发肤受之父母”这一观念已经消失殆尽，为抵抗纳米排异反应，接受改造变成Cat Boomer也成为了新的常态。&lt;/p&gt;

&lt;p&gt;有用即是真理在这里体现的淋漓尽致。&lt;/p&gt;

&lt;h4 id=&quot;我有垃圾你有桶吗--我有故事你有酒吗&quot;&gt;&lt;del&gt;我有垃圾，你有桶吗&lt;/del&gt;  我有故事，你有酒吗&lt;/h4&gt;

&lt;p&gt;游戏用夸张的边缘群体来诠释我们每个人不同的生活选择。Jill很正常地说着自己是双性恋；害羞的外卖小哥。除了边缘群体，游戏还力图用反传统的形象来塑造角色，与并不是书呆子的黑客Alma、对工作和生活充满热情的性工作者Dorothy。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Alma: 我只是……需要从胸中释放这股怨气，你明白吧？&lt;/p&gt;

  &lt;p&gt;Jill： 明白，在我看来，你胸中还是有很多怨气，毕竟它都膨胀的不像话了。&lt;/p&gt;

  &lt;p&gt;Alma：不，那里面装的可都是爱与梦想。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;此外，游戏也结合了一些现实生活关系：”无所不能的Boss”似乎是所有刚入行的新人对于自己boss的看法；那个“希望你敞开心扉”的Gil，对应了成年社会中最正常的交际关系，你知道他是个好人，你知道他是个靠谱的伙伴，但是你不了解他的过去。&lt;/p&gt;

&lt;p&gt;游戏一方面向你展示这些人的多彩多样的人生，一方面又让你了解他们的烦恼——人生抉择、社会角色、社会责任。至于黄段子和有距离感的对话，只是”成年“这个话题的附属产品。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556765783/iblog/VA11/12.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;那个世界的美，色彩丰富，富有视觉冲击力，但这些美是否仅仅是建立于色彩上，而不是建立于更深层次的精神内核上呢？随着时代的前进，Glitch City社会上弥漫着娱乐至死的精神，这个世界里面，人们的乐趣停留在流于表面的光鲜和不分对象索取的肉欲当中。当人类几千年积淀的人文气息渐渐被科技冲散，剩下的就是人云亦云或者不知所云的所谓高雅艺术，和直白粗犷的属于底层社会的街头文化，&lt;/p&gt;

&lt;p&gt;真正具有生机和美感的人，反而是这些在底层城市摸爬滚打的平头百姓。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556765783/iblog/VA11/7.jpg&quot; /&gt;&lt;/div&gt;

&lt;h4 id=&quot;dorothy天下第一可爱&quot;&gt;Dorothy天下第一可爱！&lt;/h4&gt;

&lt;p&gt;在整个游戏中，最令我印象深刻的就是Dorothy了。（每天开店都想着今天Dorothy会不会来（=ˇωˇ=）……）&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556765783/iblog/VA11/9.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;其实性工作者在赛博朋克类型的作品中是非常常见的，但是一般作品对他们的角色描绘经常很符号化，一个无力的或是很不情愿的受害者。但在这部游戏中Dorothy打破了这个固有形象。Dorothy是自愿做她的工作的，她也喜欢这个工作，她完全掌控着自己的处境。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Dorothy: 我也有一个有趣的故事可讲。是关于Mega圣诞老人恶作剧的事！&lt;/p&gt;

  &lt;p&gt;Jill: 什么？&lt;/p&gt;

  &lt;p&gt;Dorothy: 嘿嘿。是我每年都要玩一次的恶作剧。&lt;/p&gt;

  &lt;p&gt;​				 首先，我要找一家商场，等到有很多顾客上门的那一天。&lt;/p&gt;

  &lt;p&gt;​				 然后我就去抱住圣诞老人的大腿，当他问我想要什么的时候……&lt;/p&gt;

  &lt;p&gt;​				 我就用自己能装出的最天真无邪的语气对他说……&lt;/p&gt;

  &lt;p&gt;​				 “我想要你把我变成女人！”&lt;/p&gt;

  &lt;p&gt;​				 有些时候他们会试图掩盖事态。”这个Lilim想成为人类！”&lt;/p&gt;

  &lt;p&gt;​				 这样的话我就会说，”不，我。想。要。你。”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Dorothy是那种真的很喜欢自己工作的人，只是她的工作刚好和“横向摔跤”有关系而已。如果她是一个老师，她会分享关于她学生的搞笑故事；如果她是一个护士，她会谈起她诊治的那些恶心玩意儿；如果她是个修女，她一定也会用同一种愉快轻松的口气跟你讲礼拜日学校里小孩子的趣事。&lt;/p&gt;

&lt;p&gt;Dorothy有着超越其表面层次的角色深度。相信在遇到她的时候，无论男女玩家都会感到脸红的。&lt;/p&gt;

&lt;p&gt;Dorothy天下第一可爱！&lt;/p&gt;

&lt;h4 id=&quot;怎么样才是一个成年人&quot;&gt;怎么样才是一个成年人？&lt;/h4&gt;

&lt;p&gt;《VA-11 Hall-A》的大部分台词的主题，都和“成人”有关。Day 1, “成年人的东西毕竟需要优先付费。Day 9，“成长不是一种诅咒，那是一项成就。”&lt;/p&gt;

&lt;p&gt;游戏中关于成人最核心的解读，还是1）自由，以及因此带来的多样性。2）自由，以及为此所付出的代价。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Jill: 在见识过最近发生的这些危险的事情之后，你度过的每一年都显得非常重要。&lt;/p&gt;

  &lt;p&gt;​	  成长不是什么诅咒，那是一项成就。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;因为未来人生选择的问题，Jill与Lenore分道扬镳。Jill在去寻找自己所追求的人生中，每时每刻都在忍受着与女友分别的痛苦，但即使这样两人也一直都没有再见面，直到最后Lenore的妹妹Gaby前来告诉她Lenore已经因纳米排异反应去世。当Jill看到Lenore留给她的信后，她才认识到为时已晚，再多的如果也不能改变现实，那封信上只有三个字——”对不起”。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556765783/iblog/VA11/11.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;生活就是我们每天经历的战争。我们都有愉快的日子和不愉快的日子，今天不过碰巧轮到了没那么不愉快的日子罢了。要说玩过Valhalla之后的感想，那应该是&lt;strong&gt;成年是需要付出代价的，但是成年礼可能是我有过的最好的礼物。&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;欢迎光临瓦尔哈拉&quot;&gt;欢迎光临瓦尔哈拉&lt;/h4&gt;

&lt;p&gt;正如在文章开头所说，《VA11 HALL-A》故事的主角是一些在暗无天日的近未来世界中敢于坚持活下去，敢于出发寻找属于自己幸福的人们。&lt;/p&gt;

&lt;p&gt;在那个一切宏大事物都已经坍塌的苍茫年代，他们不仅正拼尽全力在可悲无望黯淡而又充满不幸的的现实中生活，追逐属于自己的幸福与啤酒，而且还把幸福的滋味分享给了整个世界。&lt;/p&gt;

&lt;p&gt;无论如何，我想你一定会喜欢上这款游戏，并从中找到要属于你的东西。&lt;/p&gt;

&lt;p&gt;你会由衷的喜欢上Glitch City里Neon District角落地下室里那间叫瓦尔哈拉的小小的、快要关门大吉的小酒吧，以及在其中流连的Jill、Gil、Boss、Dorothy、Alma、Stella和Sei、Betty和Deal、Jamie和Ingram，Virgilio和Art这些家伙——&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Welcome to Vallhala.&lt;/p&gt;

  &lt;p&gt;欢迎光临瓦尔哈拉&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;Time to mix drinks and change lives.&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;是时候调制饮料，改变人生了。&lt;/em&gt;&lt;/p&gt;

  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;

  &lt;p&gt;What can I serve you?&lt;/p&gt;

  &lt;p&gt;我能为您上点什么？&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Thu, 02 May 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/05/02/%E6%AC%A2%E8%BF%8E%E5%85%89%E4%B8%B4%E7%93%A6%E5%B0%94%E5%93%88%E6%8B%89/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/05/02/%E6%AC%A2%E8%BF%8E%E5%85%89%E4%B8%B4%E7%93%A6%E5%B0%94%E5%93%88%E6%8B%89/</guid>
        
        <category>游戏</category>
        
        
      </item>
    
      <item>
        <title>Manjaro 折腾笔记（配置深度学习开发环境）</title>
        <description>&lt;p&gt;完成效果：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1556290650/iblog/manjaro%20cfg/2019-04-26_22-48-11s1.png&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;0-目录&quot;&gt;0 目录&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1&quot;&gt;1.源镜像与系统更新&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2&quot;&gt;2.常用软件&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3&quot;&gt;3.深度学习环境&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4&quot;&gt;4.安装软件时可能遇到的问题&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1源镜像与系统更新&quot;&gt;&lt;span id=&quot;1&quot;&gt;1.源镜像与系统更新&lt;/span&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;换源&quot;&gt;换源&lt;/h4&gt;

    &lt;p&gt;&lt;strong&gt;官方镜像源（包括 core， extra， community， multilib）&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman-mirrors &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; China &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; rank //更新镜像排名，可以只留下清华源能令带宽跑满
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-Syy&lt;/span&gt; //更新数据源
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;archlinuxcn 源&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/pacman.conf&lt;/code&gt; 末尾添加下面两行（以清华源为例）&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;archlinuxcn]
Siglevel &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Optional TrustedOnly
Server &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/&lt;span class=&quot;nv&quot;&gt;$arch&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;然后安装 &lt;code class=&quot;highlighter-rouge&quot;&gt;archlinuxcn-keyring&lt;/code&gt; 包以导入GPG key&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-Syy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; archlinuxcn-keyring
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;更新系统&quot;&gt;更新系统&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-Syyu&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2常用软件&quot;&gt;&lt;span id=&quot;2&quot;&gt;2.常用软件&lt;/span&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;换包管理&quot;&gt;换包管理&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; yay		&lt;span class=&quot;c&quot;&gt;# yay不用sudo了&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;微信--tim&quot;&gt;微信 &amp;amp; TIM&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; deepin-wechat
yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; electronic-wechat  &lt;span class=&quot;c&quot;&gt;# wechat代替解决方案&lt;/span&gt;
yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; deepin.com.qq.office
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;网易云音乐--mpv&quot;&gt;网易云音乐 &amp;amp; MPV&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; netease-cloud-music
yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; iease-music &lt;span class=&quot;c&quot;&gt;# 第三方&lt;/span&gt;
yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; mpv
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;chrome&quot;&gt;Chrome&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; google-chrome
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;中文搜狗输入法&quot;&gt;中文/搜狗输入法&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; fcitx fcitx-configtool fcitx-sogoupinyin
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;向 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.xprofile&lt;/code&gt; 添加&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;GTK_IM_MODULE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;QT_IM_MODULE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx 
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;XMODIFIERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;@im&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;注销用户&lt;/strong&gt;重新登录使修改生效&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;docky&quot;&gt;Docky&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; docky
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;科学上网&quot;&gt;科学上网&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; shadowsocks-qt5
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;配置终端走代理&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;向 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.bashrc&lt;/code&gt; 添加下面两行&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;export all_proxy=socks5://127.0.0.1:1080&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 自己修改代理端口&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;unproxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;unset all_proxy&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;使修改生效&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.bashrc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;baidupcs-go百度云网盘&quot;&gt;BaiduPCS-Go——百度云网盘&lt;/h4&gt;

    &lt;p&gt;&lt;a href=&quot;https://github.com/iikira/BaiduPCS-Go/releases&quot;&gt;下载&lt;/a&gt;（&lt;em&gt;为防止被封号，推荐用测试账号登陆&lt;/em&gt;）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;conky系统监视&quot;&gt;Conky——系统监视&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay conky
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;安装选择 &lt;code class=&quot;highlighter-rouge&quot;&gt;aur/conky-lua&lt;/code&gt;&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; conky-manager
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;刷新字体&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;fc-cache &lt;span class=&quot;nt&quot;&gt;-vf&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;配置文件（将network那个配置文件里面的网卡名，替换为自己的网卡名，&lt;code class=&quot;highlighter-rouge&quot;&gt;cat /proc/net/dev&lt;/code&gt;）&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;git clone https://github.com/9527tech/conkyrc.git .Conky
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; .Conky
git checkout other_8t
sh startconky.sh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;开机自启动，写入&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.xprofile&lt;/code&gt;&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;sh ~/.Conky/startconky.sh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;oh-my-zsh&quot;&gt;oh my zsh&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; zsh git wget curl
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;安装oh my zsh，以下选一：&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# curl方式&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sh &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# wget方式&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sh &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; -&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt; 中找到 &lt;code class=&quot;highlighter-rouge&quot;&gt;ZSH_THEME=&quot;robbyrussell&quot;&lt;/code&gt; 修改主题&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;gnome插件&quot;&gt;Gnome插件&lt;/h4&gt;

    &lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/36265103&quot;&gt;安装插件方法&lt;/a&gt;，本地安装时需要重启Gnome Shell，Alt + F2 输入 r 。&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;strong&gt;Sound Input &amp;amp; Output Device Chooser&lt;/strong&gt;：声音设备选择&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Dynamic-Panel-Transparency&lt;/strong&gt;：顶栏透明，&lt;a href=&quot;https://github.com/rockon999/dynamic-panel-transparency&quot;&gt;github&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Status Area Horizontal Spacing&lt;/strong&gt;： 让顶栏更紧凑&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Random Wallpaper&lt;/strong&gt;：自动切换壁纸&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Clipboard Indicator&lt;/strong&gt;： 一个剪贴板&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Coverflow Alt-Tab&lt;/strong&gt;： 更好的窗口切换&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Simple net speed&lt;/strong&gt;：网速监测&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;GnomeStatsPro&lt;/strong&gt;：系统监视器&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Suspend Button&lt;/strong&gt;：添加一个休眠按钮&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Proxy Switcher&lt;/strong&gt;： 代理插件&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;TopIcons Plus&lt;/strong&gt;： 把托盘图标放到顶栏&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Caffeine&lt;/strong&gt;： 防止自动挂起&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3深度学习环境&quot;&gt;&lt;span id=&quot;3&quot;&gt;3.深度学习环境&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;安装anaconda&lt;/strong&gt;（清华源）&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; anaconda
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;添加环境变量，打开 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.bashrc&lt;/code&gt; 写入&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;export PATH=/opt/anaconda/bin/:$PATH
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;添加清华源&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;安装硬件驱动&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;打开 Manjaro Settings Manager，点击硬件设定，点击 Auto Install Proprietary Driver&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Tensorflow&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;conda install tensorflow-gpu
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Pytorch&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;参考&lt;a href=&quot;https://pytorch.org/&quot;&gt;官网&lt;/a&gt;安装命令（优先pip安装，condo install有可能会出现 No module named ‘torch’）&lt;/p&gt;

&lt;h3 id=&quot;4安装软件时可能遇到的问题&quot;&gt;&lt;span id=&quot;4&quot;&gt;4.安装软件时可能遇到的问题&lt;/span&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;archlinuxcn-keyring无法安装&quot;&gt;&lt;a href=&quot;https://bbs.archlinuxcn.org/viewtopic.php?id=4129&quot;&gt;archlinuxcn-keyring无法安装&lt;/a&gt;&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;pacman &lt;span class=&quot;nt&quot;&gt;-Syu&lt;/span&gt; haveged
systemctl start haveged
systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;haveged
  
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-fr&lt;/span&gt; /etc/pacman.d/gnupg
pacman-key &lt;span class=&quot;nt&quot;&gt;--init&lt;/span&gt;
pacman-key &lt;span class=&quot;nt&quot;&gt;--populate&lt;/span&gt; archlinux
pacman-key &lt;span class=&quot;nt&quot;&gt;--populate&lt;/span&gt; archlinuxcn
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;无法找到目标文件分割所需的-strip-二进制文件&quot;&gt;无法找到目标文件分割所需的 strip 二进制文件&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;yay &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--needed&lt;/span&gt; base-devel
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;一个或多个-pgp-签名无法校验&quot;&gt;一个或多个 PGP 签名无法校验&lt;/h4&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;gpg &lt;span class=&quot;nt&quot;&gt;--recv-keys&lt;/span&gt; &amp;lt;提示的未知公共密钥&amp;gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Wed, 24 Apr 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/04/24/Manjaro-%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/24/Manjaro-%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid>
        
        <category>Linux</category>
        
        
      </item>
    
      <item>
        <title>《自控力》读书笔记（心理学）</title>
        <description>&lt;h2 id=&quot;00-目录&quot;&gt;00 目录&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1&quot;&gt;01 我要做，我不要，我想要：什么是意志力？为什么意志力至关重要？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2&quot;&gt;02 意志力的本能：人生来就能抵制奶酪蛋糕的诱惑&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3&quot;&gt;03 累倒无力抵抗：为什么自控力和肌肉一样有极限？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4&quot;&gt;04 容忍罪恶：为何善行之后会有恶行？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5&quot;&gt;05 大脑的弥天大谎：为什么我们误把渴望当幸福？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6&quot;&gt;06 “那又如何”：情绪低落为何会使人屈服于诱惑？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7&quot;&gt;07 出售未来：及时享乐的经济学&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8&quot;&gt;08 传染：为什么意志力会传染？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#9&quot;&gt;09 别读这章：“我不要”力量的局限性&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#10&quot;&gt;10 结语&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;01-我要做我不要我想要什么是意志力为什么意志力至关重要&quot;&gt;&lt;span id=&quot;1&quot;&gt;01 我要做，我不要，我想要：什么是意志力？为什么意志力至关重要？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;意志力实际上是&lt;strong&gt;“我要做、“我不要”和“我想要”&lt;/strong&gt;这三种力量，它们协同努力，让我们变成更好的自己。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;更强的自控力需要更多的自我意识&lt;/strong&gt;，对决定做记录、回想。&lt;/p&gt;

    &lt;p&gt;利用一周的时间观察一下，你究竟是怎样屈服于冲动的。你甚至不用设定一个自控目标，只需要看看你能否及早意识到自己在做什么，什么样的想法、感受和情况最容易让你有冲动，想些什么活暗示什么最容易让你放弃冲动。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;训练大脑，增强意志力&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;大脑对经验有着超乎人想象的反应。如果你每天都让大脑专注，它就会越来越专注。针对大脑的训练，可以自己给自己&lt;strong&gt;设置诱惑&lt;/strong&gt;，来挑战”我要做“、”我不要“。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;冥想&lt;/strong&gt;训练也可以提升人们日常生活中的自我意识，在冥想中集中注意力于自己的呼吸，最重要的是在自己走神的时候要能意识到这一点，一次冥想5分钟左右，也可10-15分钟。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;深入剖析&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;更难的事是什么？想象你正面临一个意志力的挑战。更难的事是什么？为什么它会如此困难？&lt;/li&gt;
  &lt;li&gt;认清两个自我。你的意志力挑战是，如何描述相抗衡的两个自我？冲动的你想要什么？明智的你又想要什么？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;记录你的意志力选择。至少选一天，注意观察你做的关于意志力的决定。&lt;/li&gt;
  &lt;li&gt;5分钟大脑冥想训练。在脑海中默念“呼”和“吸”，把注意力集中在呼吸上。当你开始走神的时候，重新集中注意力。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;02-意志力的本能人生来就能抵制奶酪蛋糕的诱惑&quot;&gt;&lt;span id=&quot;2&quot;&gt;02 意志力的本能：人生来就能抵制奶酪蛋糕的诱惑&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;自控力不仅和心理有关，更和生理有关。只有在大脑和身体同时作用的瞬间，你才有力量克服冲动。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;要提高意志力的生理基础，上一章的冥想练习就是最简单有效的方法。&lt;/p&gt;

    &lt;p&gt;这里告诉你一种快速提高意志力的方法：&lt;strong&gt;将呼吸频率降低到每分钟4-6次，也就是每次呼吸用10-15秒时间，比平常呼吸要慢一些&lt;/strong&gt;。只要你有足够的耐心，加上必要的练习，这一点不难办到。放慢呼吸（但不要憋气，这会让人更紧张）能激活前额皮质，提高心率变异率，有助于你的身心从压力状态调整到自控力状态。这样&lt;strong&gt;训练几分钟&lt;/strong&gt;后，你就会感到平静，有控制感，能够克服欲望、迎接挑战。&lt;/p&gt;

    &lt;p&gt;在下一次面对欲望之前，不妨先作个放慢呼吸的练习。（“三思而后行”）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;事实证明，科学家找到的自控力良药竟然是&lt;strong&gt;锻炼&lt;/strong&gt;！如果你觉得锻炼太累了，或是没有时间锻炼，那么不妨将锻炼当做恢复体能和意志力的方法。&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;我需要锻炼多久？&lt;/p&gt;

        &lt;p&gt;不过不能坚持就毫无意义。2010的一项研究表明，改善心情，缓解压力的最有效锻炼是5分钟，而不是每次几小时。短时间的爆发可能比长时间的锻炼更能改善你的心情。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;什么样的锻炼最有效？&lt;/p&gt;

        &lt;p&gt;身体和大脑是协调一致的。所以，只要是你想做的，就是最好的起点。整理花园、散步、跳舞、做瑜伽、团队运动、游泳、逗孩子、逗宠物、甚至精神饱满的打扫房间或者逛商店，都可以是有效的锻炼途径。&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;睡出意志力！&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;长期睡眠不足（前额皮质受损）让你更容易感到压力、萌生欲望、受到欲望。你还会很难控制情绪、集中注意力，或是无力应付“我想要”的意志力挑战。&lt;/p&gt;

    &lt;p&gt;但如果睡眠不足的人补上一个好觉，他的前额皮质就会恢复如初，他的大脑和休息良好的人的大脑会完全一样（反应可逆）。&lt;/p&gt;

    &lt;p&gt;当睡眠成为了意志力挑战时，那么真正的问题并不是强迫自己去睡觉，而是远离那些让自己没法睡觉的事。&lt;/p&gt;

    &lt;p&gt;如果你明知道自己能获得更多的睡眠，却没法早点入睡，那就不要想睡觉这件事，想一想你到底对什么说了“我想要”。这个意志力法则同样适用于你想逃避或拖延的事——当你不知道自己想做什么的时候，你或许需要知道自己不想做什么。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;自控力太强的代价&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;自控需要大量能量，长时间的自控就像慢性压力一样，可能会削弱免疫系统的功能，增大患病的概率。试图控制所有的思想、情绪和行为也是一剂毒药。&lt;/p&gt;

    &lt;p&gt;从压力和自控力中恢复的最佳途径就是&lt;strong&gt;放松&lt;/strong&gt;：选择一个你觉得舒服的姿势，闭上眼睛，做几次深呼吸，感觉你的腹部有起伏。如果你觉得身体某处很紧张，你可以有意识地挤压或收缩肌肉，然后就不要再去管它了。保持这种状态5-10分钟，试着享受这种除了呼吸什么都不用想的状态。如果担心睡着，那就先设定好闹钟。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;深入剖析-1&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;什么是威胁？对你的意志力挑战来说，什么是需要克制的内在冲动？&lt;/li&gt;
  &lt;li&gt;压力和自控。试着找出持续一整天或一整周的压力，看看它对你的自控力产生怎样的影响。你有过强烈的欲望吗？你发脾气了吗？你把要做的事拖到明天了吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-1&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;呼吸出你的自控力。把你的呼吸降到每分钟4-6次，将身体调整到适合自控的状态。&lt;/li&gt;
  &lt;li&gt;5分钟给意志力加油。出门活动，哪怕只是在周围转转，也能减少压力、改善心情、提供动力。&lt;/li&gt;
  &lt;li&gt;睡眠。打盹或补觉可以消除睡眠不足的影响。&lt;/li&gt;
  &lt;li&gt;放松能让你恢复意志力储备。躺下，深呼吸，让“放松的生理反应”帮你从自控和压力造成的疲惫中恢复过来。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;03-累倒无力抵抗为什么自控力和肌肉一样有极限&quot;&gt;&lt;span id=&quot;3&quot;&gt;03 累倒无力抵抗：为什么自控力和肌肉一样有极限？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;自控的肌肉模式&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;自控力就像肌肉一样有极限，在使用之后会渐渐疲惫、从早上到晚上会逐渐减弱。这种肌肉模式不仅有助于我们了解为什么自己疲惫时会失败，还告诉我们应该如何训练自控力——合理分配意志力。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;为什么自控力存在局限？&lt;/p&gt;

        &lt;p&gt;自控时前额皮质需要消耗能量，&lt;strong&gt;低血糖能结解释很多意志力失效的情况&lt;/strong&gt;（无糖苏打水销量上升和体重增加很有关系）。研究显示人饥饿的时候更愿意冒险，倾向于短期需求，会去冲动行事。此时大脑的首要任务是获得更多的能量，而不是保证你做出明智的决定，实现你的长远目标。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;但从长远来说，过度依赖糖分并不是自控的好方法。从长远来看，血糖的突然增加或减少会影响身体和大脑使用糖分的能力。这就意味着，你身体中的含糖量可能很高，但却没有多少能量可用。&lt;strong&gt;更好的方法是保证你的身体有足够的食物供应。推荐低血糖饮食，能够让你的血糖更稳定。&lt;/strong&gt;低血糖食品包括瘦肉蛋白、坚果和豆类、粗纤维谷类和麦片、大多数水果和蔬菜等等。（可以尝试每个工作日都吃一顿丰盛健康的早餐，而不是什么都不吃；吃零食时选择坚果而非糖果等等）&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;训练“意志力肌肉”&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;控制自己以前不会注意的小事，以此训练自控力肌肉&lt;/p&gt;

        &lt;p&gt;可以设定期限。比如清理衣橱，第一周打开柜门，第二周整理衣服。。。。。。&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;在一些小事上持续自控会提高整体的意志力&lt;/p&gt;

        &lt;p&gt;比如改变姿势、每天都用力握一个把手、戒掉甜食、记录收支情况。虽然这些小事看起来无关紧要，但它却能让我们应付自己关注的意志力挑战，同时也不会产生严重的疲劳感。&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;这些训练不是为了让你在规定期限前完成任务、用左手开门或不说脏话，而是让你养成习惯、关注自己正在做的事、选择更难的而不是最简单的事。通过每一次意志力练习，大脑开始习惯于三思而后行。&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;如果你想有一套自己的意志力训练方法，不妨试试下面几个锻炼模式：&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;
            &lt;p&gt;增强”我不要“的力量&lt;/p&gt;

            &lt;p&gt;不随便发誓（或者不说某些口头禅），坐下的时候不挠脚，用不常用的手进行日常活动（如吃饭和开门）&lt;/p&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;p&gt;增强”我想要“的力量&lt;/p&gt;

            &lt;p&gt;每天都做一些事（但不是你已经在做的事），用来养成习惯或不再找借口。你可以给母亲打电话、冥想5分钟，或是每天在家里找出一件需要扔掉或再利用的东西。&lt;/p&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;p&gt;增强自我监控能力&lt;/p&gt;

            &lt;p&gt;认真记录一件你平常不关注的事，可以是你的支饮食，也可以是你花在上网和看电视上的时间。&lt;/p&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;p&gt;可以选择一个和自己面对的意志力挑战有关的练习。比如存钱的目标，那么可以记录收支情况；锻炼的目标，可以早上起来先做10个仰卧起坐。&lt;/p&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;p&gt;如果你想彻底改变旧习惯，最好先找一种简单的方法来训练自控力、提高意志力，而不是设定一个过高的目标。&lt;/p&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;自控力是否真的有”极限“&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;疲惫不是一种身体反应，而是一种感觉、情绪。在马拉松运动中，运动员第一次想放弃时，其实还远没达到自己的身体极限。这其实是大脑中的过度保护性的监控机制在发挥作用。&lt;/li&gt;
      &lt;li&gt;自控力的极限和身体的极限是一样的道理。也就是说，我们总是在意志力真正耗尽之前就感到无法坚持了。我们对自身能力的认知会决定我们到底是放弃还是坚持。虽然现在没人认为人类的自控力是无限的，但事实是我们的意志力比想象中多得多。或许我们也可以像运动员一样，挺过意志力消耗殆尽的感觉，冲过意志力挑战的终点。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;只要你愿意，你就有意志&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;事实证明，”意志力肌肉“也可以在正确的激励下坚持更长的时间&lt;/li&gt;
      &lt;li&gt;当你的意志力告急时，你可以挖掘”我想要“的力量，让自己恢复能量，面对你最大的意志力挑战时，你可以考虑一下动机：
        &lt;ul&gt;
          &lt;li&gt;如果挑战成功，你会收获什么？你个人会有什么回报？你会更幸福、更自由、更有钱、还是会更成功？&lt;/li&gt;
          &lt;li&gt;如果挑战成功，还有谁会受益？肯定有人依赖于你，你的选择会影响到他们。你的行为会如何影响你的家人、朋友、同事、雇主或雇员、街坊邻居？你的成功会怎样帮到他们？&lt;/li&gt;
          &lt;li&gt;如果你现在愿意做困难的事，那么一段时间后，这个挑战将会变得容易。你能想象出，如果你在这个挑战中取得进步，你的生活将会是什么样子，你自己会变成什么样子吗？如果你知道你还有更大的进步空间，现在的不适是不是变得值得了呢？&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;这一周，当你面临挑战时，问问自己，那一刻哪种动力最能让你坚持下去。你愿不愿意为了别人，而不是为了自己，去做那些困难的事呢？是对未来的憧憬，还是对命运的恐惧，推动你前行？当你发现了自己最重要的“我想要“的力量，发现了你脆弱时给你力量的东西后，只要你觉得自己就要在诱惑前放弃了，就想想这个动力。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;如果我们想增强自控力，就要考虑如何支撑住最疲惫的自己，而不是指望最理想的自己突然出现来拯救生活。&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想&quot;&gt;核心思想&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;自控力就像肌肉一样有极限。自控力用的太多会疲惫，但坚持训练能增强自控力。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;深入剖析-2&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;意志力的上下波动。本周，记录你的自控力，特别注意什么时候你的意志力最强，什么时候你最容易放弃。&lt;/li&gt;
  &lt;li&gt;你的疲惫感是真实的吗？下次你觉得自己太”疲惫“而无法自控的时候，看看自己能不能挺过第一波疲惫的感觉，向前迈出一步。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-2&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;意志力饮食。确保你的身体摄入了足够的食物，能为你提供足够多的能量。&lt;/li&gt;
  &lt;li&gt;意志力锻炼。本周，选择一件事来做（”我想要“的力量）或不做（”我不想“的力量），或者记录一件你不曾关注的事情，以此锻炼你的”自控力肌肉“。&lt;/li&gt;
  &lt;li&gt;发现你的”我想要“的力量。发现自己最重要的”我想要“的力量，也就是你脆弱的时候给你动力的东西。每当你面对诱惑，想要放弃的时候，都想一想这个东西。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;04-容忍罪恶为何善行之后会有恶行&quot;&gt;&lt;span id=&quot;4&quot;&gt;04 容忍罪恶：为何善行之后会有恶行？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;“道德许可”效应&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;当你做善事的时候，你会感觉良好。这就意味着，你更可能相信自己的冲动。而冲动常常会允许你做坏事。这不仅会批准我们做坏事，也会让我们错失做善事的机会。比如，和那些记不起曾做过善事的人相比，有行善经历的人在慈善活动中捐的钱要少60%。如果工厂经理想起自己近期做过善事，就更不会花钱去减少工厂造成的污染。你很可能因为今天去锻炼了，明天就不去了。&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;“我已经这么好了，应该得到一点奖励”。&lt;/strong&gt;这种对补偿的渴望常常使我们堕落。因为我们很容易认为，纵容自己就是对美德最好的奖励。我们忘记了自己真正的目标，向诱惑屈服了。&lt;/p&gt;

    &lt;p&gt;更普遍的是，&lt;strong&gt;即使我们仅仅去考虑某些事，而实际并没有真正去做，也会觉得自己应该受到表扬&lt;/strong&gt;。&lt;/p&gt;

    &lt;p&gt;“道德许可”最糟糕的部分并不是它可疑的逻辑，而是它会诱使我们做出背离自己最大利益的事。它让我们相信，放弃节食、打破预算、多抽根烟这些不良行为都是对自己的奖励。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;关于进步的问题&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;把“进步”道德化。大部分人认为，取得进步会刺激我们获得更大的成功。但心理学家知道，我们总把进步当作放松借口。&lt;/li&gt;
      &lt;li&gt;即便是最值得信赖的、用来完成目标的工具，如待办事项清单，都可能让你事与愿违。（你是不是列出了自己所有要做的事，然后一想到自己一天里能做完所有工作，就觉得自己很棒？如果真是如此，那么很多人都和你一样。能列出这样的清单真是让人如释重负。我们把需要做的事当成了自己已经付出的努力，这会给我们错误的满足感。）&lt;/li&gt;
      &lt;li&gt;这不是说进步本身是个问题，问题在于进步给我们带来的感觉。更进一步说，问题是我们不能坚持自己的目标，而会听从自己的感觉。进步可以激励人，甚至可以提高未来的自控力，但前提是，你要把自己的行动当做努力完成目标的证据。换句话说，你要清楚自己做了什么，并盯紧自己的目标。&lt;strong&gt;你不应该想着“我做到了，好了，现在我可以做点我真正想做的事了！” 而是应该想着“我做这件事是因为我想要。。。”&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;如何关注对自己的承诺，而不是关注单纯的进步？——停下来想一想，上一次&lt;u&gt;为什么&lt;/u&gt;能拒绝诱惑（而不是仅仅回忆曾经拒绝过诱惑）。&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;今天犯错，明天补救&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;“道德许可”不只计算过去的善行，我们同样可能看到未来。比如，只是“想”去锻炼的很可能晚餐吃得更多。这种习惯允许我们今天犯错，明天补救——我们就是这么告诉自己的。麦当劳在菜单上增加健康食品时，反而引起了巨无霸销量暴涨。&lt;/li&gt;
      &lt;li&gt;为什么会这样？有时候，大脑会对能完成目标的可能性感到兴奋，它错把可能性当成真正完成了目标。我们总是憧憬着未来，却没能看到今天的挑战。我们觉得，推迟到以后再做理所应当。我们相信，未来不仅能弥补今天没做的事，还能做到更多。&lt;/li&gt;
      &lt;li&gt;一个可以帮助你克服这种“明日复明日”的技巧：&lt;strong&gt;当你想改变某种行为时，试着减少行为的变化性，而不是减少那种行为。&lt;/strong&gt;比如，不要问自己“我现在想不想吃这块糖”，而要问自己“我想不想在一年里每天下午都吃一块糖”，或者，你明知道应该做一件事却拖延不做时，不要问自己“我是想今天做还是明天做？”，而要问自己“我是不是想承担永远拖延下去的恶果？”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;光环效应&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;只要使你放纵的东西和使你觉得品德高尚的东西同时出现，就会产生光环效应。研究人员发现，如果把芝士汉堡和绿色沙拉一起端上来，客人会觉得芝士汉堡比单独端上来时少了很多卡路里。&lt;/li&gt;
      &lt;li&gt;同样的还有很多&lt;strong&gt;“神奇词语”&lt;/strong&gt;：印在饼干外包装上的“零脂肪”、“买一送一”、“全天然”、“有机”、“公平贸易”、“为了慈善”。。。。。。&lt;/li&gt;
      &lt;li&gt;墨尔本大学经济学家发现，当人们为罪恶行为做“忏悔”的时候，最有可能产生“许可效应”。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;从上面看来，每次自控好像都是一种惩罚，只有放纵自我才是奖励。但我们为什么一定要这样看待自己呢？想要走出“道德许可”的陷阱，我们就要知道，那个想变好的自己才是真正的自己，想按核心价值观生活的自己。如此一来，我们就不会认为那个冲动、懒散、容易受到诱惑的自己是“真正”的自己了。我们就不会再表现得像个必须被强迫完成目标、然后为做出的努力索要奖励的人了。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-1&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;当我们将意志力挑战看成衡量道德水平的标准时，善行就会允许我们做坏事。为了更好的自控，我们需要忘掉美德，关注目标和价值观。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-3&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;善于恶：当你的意志力挑战成功时，你会不会告诉自己你很“好”，然后允许自己做一些“坏”事？&lt;/li&gt;
  &lt;li&gt;你是否在向明天赊账？你是不是告诉自己明天会弥补今天的过错？如果是这样的话，你是否真的弥补上了？光环效应：你是不是只看到了坏东西好的一面，比如折扣省钱、零脂肪、保护环境？&lt;/li&gt;
  &lt;li&gt;你觉得自己是谁？当你想到你的意志力挑战时，你觉得哪部分的你才是”真实“的你？是想追求目标的你，还是需要被控制的你？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-3&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;明天和今天毫无区别。当你想改变行为的时候，试着减少行为的变化性，而不是减少某种行为。&lt;/li&gt;
  &lt;li&gt;取消许可，牢记理由。下一回，当你发现你自己在用曾经的善行为放纵辩护的时候，停下来想一想你做”好“事的原因，而不是你应不应该得到奖励。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;05-大脑的弥天大谎为什么我们误把渴望当幸福&quot;&gt;&lt;span id=&quot;5&quot;&gt;05 大脑的弥天大谎：为什么我们误把渴望当幸福？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;人脑中的“奖励中心”以及奖励的承诺——“我想要”的神经生物学原理&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;过去几年中，神经科学家给多巴胺释放产生的效应起了很多名字，包括寻觅、希望、渴望和欲望。但有一件事很清楚——这不是喜欢、满足、快乐或真正的奖励会带来的感觉。2001年，斯坦福神经科学家Brian Knutson证明了&lt;strong&gt;多巴胺会促使人们&lt;u&gt;期待&lt;/u&gt;得到奖励，但不能感觉到获得奖励时的快乐&lt;/strong&gt;。多巴胺控制的是行动，而不是快乐。奖励的承诺保证了被试者成功的行动，从而获得奖励。当奖励系统活跃时，他们感受到的是期待，而不是快乐。&lt;/li&gt;
      &lt;li&gt;我们需要多巴胺，多巴胺的释放保证了我们会产生把自己喂饱的念头。如果你生活在食物稀缺的环境里，这绝对是最好的本能。但在你生活的时代里，食物不仅极大丰富，而且很多都是专门为了刺激你的多巴胺释放而制造出来的。那么，多巴胺就成了走向肥胖的食谱，而不是长命百岁的保障。&lt;/li&gt;
      &lt;li&gt;现代科技“及时行乐”的特点，加上原始的激励系统，就让我们成了多巴胺的奴隶，从此欲罢不能。游戏中“升级”、“获胜”随时可能出现，让意志力不坚定的人们难以戒掉。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;分泌多巴胺的大脑：神经营销学的崛起&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;大量分泌多巴胺会放大“及时行乐”的快感，让你不再关心长期的后果。&lt;/strong&gt;一走进商店的免费试吃位置（研究发现食品和饮料的样品会让购物者更饥饿、更口渴，并产生“寻找奖励”的心态），为什么会这样呢？因为样品包含了对两个最大的奖励的承诺——免费和食物。其他类似的也比如有乐透彩票广告鼓励你去想象，自己中大奖后会去做什么。&lt;/li&gt;
      &lt;li&gt;大脑的奖励系统对新鲜感和多样性也会有反应。你的多巴胺神经元会对熟悉的奖励反应较少，即便那是让你真正获得享受的东西（如旧款式的衣服推出新颜色）。当然还有价格上的巧妙设置（买一送一、一日促销、很高的建议零售价），还有气味营销学。&lt;/li&gt;
      &lt;li&gt;我们可以来观察一下，零售商和营销人员究竟是如何刺激奖励承诺的。把逛商店或看广告当作一种游戏。你闻到了什么？看到了什么？听到了什么？当你知道这些暗示都是经过精心设计，专门要诱惑你上钩的时候，你就能看清它们到底是什么，也就能成功抵御它们了。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;让多巴胺发挥作用&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;试着把我们最不喜欢的东西“多巴胺”化。&lt;/strong&gt;比如带上可怕的文书工作走进自己喜欢的咖啡厅，边喝热巧克力边完成工作，或是想想自己努力工作后取得的最佳结果，让未来的奖励显得更加真实。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;多巴胺的阴暗面&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;多巴胺的首要任务是让我们追求快乐，而不是让我们快乐。它并不介意给我们来点压力，即使这会让我们在追求快乐时觉得不快乐。因此，我们渴望的东西既是快乐的源泉，也是压力和焦虑的源泉。&lt;/li&gt;
      &lt;li&gt;奖励的承诺有很大的力量。它会让我们继续追求那些不会带给我们快乐的东西，会让我们消费那些不会带来满足感，只会带来更多痛苦的东西。追求奖励时多巴胺的主要目标，所以，即便你经历的事物和原本承诺的并不相符，它也不会给你释放“停下来”的信号。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;别误把奖励的承诺当幸福&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;越来越多的证据表明，&lt;strong&gt;当人们注意到奖励的承诺不过是假象时，魔咒就解开了&lt;/strong&gt;。找一个常常让你放纵自己的诱惑因素，测试一下奖励的承诺。请关注你放纵的过程，不要急着去体验。注意这种奖励的承诺给你什么感觉。期待、希望、兴奋、焦虑、流口水。。。。。。你的大脑和身体感觉到了什么。然后，允许自己接受诱惑。和你的期望相比，这种体验怎么样？奖励的承诺有没有消失？它是否仍然促使你吃的更多、花的更多、待得更多？什么时候你会满足？你是否达到了一种没法继续的程度，因为你太饱了、太累了、太沮丧了、没时间了，或是无法得到“奖励”了？&lt;/li&gt;
      &lt;li&gt;进行上面这项联系的人通常会有两种结果。一些人会发现，当他们真的关注放纵的感受时，他们实际上并不需要自己想象中那么多的东西。另外一些人发现，这种体验完全无法让他们满足。这就暴漏了奖励的承诺和实际体验之间的差别。这两种观察都会让你对曾经无法控制的事有更强的自控力。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;欲望的重要性&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;没有欲望的生活可能不需要这么多自控，但那也不能称之为生活了。&lt;/li&gt;
      &lt;li&gt;当我们的奖励系统平静下来，我们并不会感到满足，而更可能表现得冷漠。&lt;strong&gt;不够活跃的奖励系统可能正是抑郁症的生理基础。&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;欲望没有绝对的好坏之分，重要的是欲望将我们引向哪个方向，以及我们是否足够明智，知道什么时候该听从欲望的声音。（如果我们想要拥有自控力，就需要区分让我们的生活有意义的真实奖励，和让我们分散精力、上瘾的虚假奖励。这并不是一件简单的事）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-2&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;我们的大脑错把奖励的承诺当作快乐的保证，所以，我们会从不可能带来满足的事物中寻找满足感。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-4&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;是什么让你的多巴胺神经元不停燃烧？是什么给了你奖励的承诺，迫使你去寻找满足感？&lt;/li&gt;
  &lt;li&gt;神经营销学和环境的刺激。观察一下零售商和营销人员如何刺激奖励的承诺。&lt;/li&gt;
  &lt;li&gt;渴望的压力。注意观察，欲望是如何引发压力和焦虑的。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-4&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;为了你的“我要做”挑战释放多巴胺。如果你总是拖延着不做某些事，试着把它和那些能让你的多巴胺神经元燃烧的事联系在一起，促使你自己去做那些事。&lt;/li&gt;
  &lt;li&gt;测试奖励的承诺，做那些大脑告诉你你会快乐，但似乎无法让你满足的事，比如吃零食、购物、电视以及与网络相关的、浪费时间的事，注意观察自己放纵时的感受，现实和大脑的承诺相符吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;06-那又如何情绪低落为何会使人屈服于诱惑&quot;&gt;&lt;span id=&quot;6&quot;&gt;06 “那又如何”：情绪低落为何会使人屈服于诱惑？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;压力会勾起欲望&lt;/strong&gt;。神经科学家证明了，压力包括愤怒、悲伤、自我怀疑、焦虑等消极情绪，会使你的大脑进入寻找奖励的状态。只要你的大脑和奖励的承诺联系起来，你就会渴望得到那个“奖励”。当拖延症患者想到自己已经远远落后于进度时，他们会万分焦虑，这反而让他们继续拖延下去，不去面对落后于进度的事实。在每个案例中，“想要更快乐”这个目标总是战胜了自控力的目标。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;如何有效的缓解压力&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;最有效的解压方法包括：锻炼或参加体育活动、祈祷或参加宗教活动、阅读、听音乐、与家人朋友相处、按摩、外出散步、冥想或做瑜伽，以及培养有创意的爱好。&lt;/li&gt;
      &lt;li&gt;最没效果的解压方式则包括：赌博、购物、抽烟、喝酒、暴饮暴食、玩游戏、上网、花两个小时以上看电影或电视。&lt;/li&gt;
      &lt;li&gt;有效和无效的主要区别是什么？真正能缓解压力的不是释放多巴胺或依赖奖励的承诺，而是增加大脑中改善情绪的化学物质，如血清素、Y-氨基丁酸和让人感觉良好的催产素。这些物质还会让大脑不再对压力产生反应，减少压力荷尔蒙，产生有治愈效果的放松反应。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;“那又如何”效应：为什么罪恶感不起作用？&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;这种效应描述了&lt;strong&gt;从放纵、后悔到更严重的放纵的恶性循环&lt;/strong&gt;。屈服会让你对自己失望，会让你想做一些改善心情的事。那么，最廉价、最快捷的改善心情的方法是什么？往往是做导致你情绪低落的事。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;打破“那又如何”的循环&lt;/strong&gt;：
如果你认为提升意志力的关键就是对自己狠一点，那么，这么想的不是只有你一个。但是，你错了。众多研究表明，自我批评会降低积极性和自控力，而且也是最容易导致抑郁的因素。相反，自我同情则会提升积极性和自控力。&lt;strong&gt;自我谅解，而不是像罪恶感，能够帮我们重回正轨&lt;/strong&gt;。
在个人挫折面前，持自我同情态度的人比持自我批评态度的人更愿意承担责任。他们也更愿意接受别人的反馈和建议，更可能从这种经历中学到东西。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;“虚假希望综合症”&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;发誓改变会让我们充满希望。我们喜欢想象改变后的生活，幻想改变后的自己。但不幸的是，改变的承诺很少能朝我们希望的方向发展，不切实际的乐观可能会给我们一时的快乐，但当我们第一次遇到挫折时，失望就会取代最初决定改变时的良好感觉。这会造成一个循环。&lt;/li&gt;
      &lt;li&gt;乐观给我们动力，但少许的悲观能帮我们走向成功。如果能预测自己什么时候、会如何受到诱惑和违背承诺，你就更有可能拥有坚定的决心。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;为了避免压力导致的意志力失效，我们需要找到能让我们真正快乐的东西，而不是虚假的奖励承诺，也不是空洞的改变承诺。我们需要允许自己去做真正让自己快乐的事，远离那些与我们生活无关的压力根源。当我们遭遇挫折时，我们需要原谅曾经的失败，不要把它们作为屈服或放弃的借口。想要增强自控力，自我同情比自我打击有效的多。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-3&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;情绪低落会使人屈服于诱惑，宝陀罪恶感会让你变得更强大。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-5&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;缓解压力的承诺。当你面临压力、感到焦虑或情绪低落时，你会怎么解决？&lt;/li&gt;
  &lt;li&gt;什么吓到了你？注意那些从媒体、网络或其他渠道听到或看到的压力因素。&lt;/li&gt;
  &lt;li&gt;遭遇挫折。当意志力失效时，你会产生罪恶感并责备自己吗？&lt;/li&gt;
  &lt;li&gt;决定去改善心情。你会幻想未来的自己来改善现在的心情，而不是采取实际行动来改善自己的行为吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-5&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;有效的解压方法。下一会，当你面临巨大的压力时，尝试一种有效的解压方法，例如锻炼身体或参加体育活动、祈祷或参加宗教活动、阅读、听音乐、与家人朋友相处、按摩、外出散步、冥想或做瑜伽，以及培养有创意的爱好。&lt;/li&gt;
  &lt;li&gt;失败的时候，请原谅自己。面对自己的挫折，持自我同情的态度，以免罪恶感让你再次放弃抗争。&lt;/li&gt;
  &lt;li&gt;乐观的悲观主义者更有可能成功。预测你什么时候、会怎样受到诱惑和违背承诺，想像一个不让自己放弃抗争的具体方法。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;07-出售未来及时享乐的经济学&quot;&gt;&lt;span id=&quot;7&quot;&gt;07 出售未来：及时享乐的经济学&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;“延迟折扣”&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;等待奖励的时间越长，奖励对你来说价值越低。&lt;/strong&gt;很小的延迟就能大幅降低你感知到的价值。（相比等待10分钟后吃6颗糖，人们往往倾向选择立即吃&lt;u&gt;**摆在面前的**&lt;/u&gt;两颗糖）作为现代人，我们在权衡“即时奖励”和“未来奖励”时，大脑处理选项的方式相当不一样。“即时奖励”会激励更古老、更原始的奖励系统，刺激相应的多巴胺产生欲望。“未来奖励”则不太能激活这个奖励系统。&lt;/li&gt;
      &lt;li&gt;注意当即时奖励的两颗糖并没有摆出来时，人们就会更有可能选择有延迟的、更大的回报。看不到直接的奖励会让奖励变得抽象起来，对奖励系统的刺激也会减少。对那些想延迟快感的人来说，这是个好消息。&lt;strong&gt;只要你能创造一点距离，就会让拒绝变得容易起来。&lt;/strong&gt;（比如把糖放在抽屉里，而不是放在桌子上）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;10分钟延迟法则&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;想获得一个冷静明智的头脑，我们就需要&lt;strong&gt;在所有诱惑面前安排10分钟的等待时间&lt;/strong&gt;。如果10分钟你仍旧想要，你就可以拥有它。但&lt;strong&gt;在10分钟之内，你一定要时刻想着长远的奖励，以此抵抗诱惑&lt;/strong&gt;。如果可以的话，你也可以创造一些物理上（或视觉上）的距离。&lt;/li&gt;
      &lt;li&gt;如果你的意志力挑战需要“我要做”的力量，你仍旧可以使用这个“10分钟法则”，以此来克服诱惑和拖延。你可以把法则改成&lt;strong&gt;“坚持做10分钟，然后就可以放弃”&lt;/strong&gt;。当10分钟结束后，你就可以允许自己停下来。不过你会发现，只要一开始，你就会想继续做下去。&lt;/li&gt;
      &lt;li&gt;当你觉得自己无法做到“不会有下一次”的时候，不妨用“10分钟延迟法则”来增强你的自控力。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;你的折扣率是多少&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;给“未来的回报”打折扣是人的天性但每个人打的折有所不同。有些人打的折很低，就像高级商店从不降价出售最好的商品。这些人心里牢记更大的奖励，并会等待带它的到来。另一些人打的折则很高。你打的折是多是少，很大程度上决定了你长期的健康状况和你获得的成功。但人的这种折扣率并不是一成不变的。&lt;/li&gt;
      &lt;li&gt;另外，当人们&lt;strong&gt;首先&lt;/strong&gt;想到未来的奖励时，未来的奖励的折扣率极会大幅下降。&lt;/li&gt;
      &lt;li&gt;无论面对什么样的诱惑，你都可以利用以下方式抵抗即时的满足感：
        &lt;ol&gt;
          &lt;li&gt;当你受到诱惑要做与长期利益相悖的事时，请想象一下，这个选择就意味着，你为了即时的满足感放弃了更好的长期奖励。&lt;/li&gt;
          &lt;li&gt;想想你已经得到了长期的奖励。想象未来的你正在享受自控的成果。&lt;/li&gt;
          &lt;li&gt;然后扪心自问：你愿意放弃他，来换取正在诱惑你的短暂快感吗？&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;预见未来的自己&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;我们会把未来的自己想象成完全不同的一个人，这种错误的想象让我们向对待陌生人一样对待未来的自己。我们指望未来的自己能做好所有的事，但典型的情况是，当我们到了未来，理想中“未来的自己”却不见了，最后做决定的还是毫无改变的曾经的自己。“未来的自己”被我们一直推向未来。&lt;/li&gt;
      &lt;li&gt;为什么我们会把未来的自己视为另一个人呢？原因在于我们不知道未来的自己的想法或感受。当我们想到未来的自己时，我们的欲望不会像现在一样紧迫，情绪不会像现在一样真切。直到我们真的需要选择的时候，我们才会知道当下的想法和感受。（有人认为人之所以不给未来的自己储蓄，是因为存钱就像把钱给了陌生人）&lt;/li&gt;
    &lt;/ul&gt;

    &lt;ol&gt;
      &lt;li&gt;&lt;strong&gt;创造一个未来的记忆&lt;/strong&gt;
想象未来可以让人延迟满足感，你甚至不需要去想延迟满足感带给未来的回报，只要设想一下未来就行。当你想象未来的图景时，大脑就会更具体、更直接地思考你现在选择的结果。你想象的未来图景越真实、越生动，你做的决定就越不会让你在未来后悔。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;想象一下未来的自己&lt;/strong&gt;
想想未来的自己能增强你现在的意志力。可以是坚持锻炼的自己，身体健康，充满能量，亦或是害怕成为的自己，懒散度日，毫无活力。这两种想象都能让我们离开椅子。&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;该等待的时候，该屈服的时候&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;我们一直认为最好不要及时享乐，但真的是这样吗？&lt;/li&gt;
      &lt;li&gt;如果用工作、美德或未来的幸福不断得推迟快感，最终一定会为自己的决定感到后悔——“高瞻远瞩”。那些受“高瞻远瞩”这么的人习惯于看得更远，而看不到屈服于诱惑时的快感。这个问题其实和“目光短浅”一样严重，最后都会带来失望和不快乐。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-4&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;我们无法明确地预知未来，这为我们带来了诱惑，让我们拖延着不做某些事。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-6&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;你给未来的奖励打了几折？在你的意志力挑战中，每当你屈服于诱惑或拖延的时候，你会出售哪些未来的奖励？&lt;/li&gt;
  &lt;li&gt;你在等待未来的自己吗？你是否在推迟重要的改变或任务，等待自控力更强的未来的自己出现？&lt;/li&gt;
  &lt;li&gt;为了你自己好，你是否太“高瞻远瞩”了？你是否觉得放纵自己比抵抗诱惑还困难？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-6&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;等待10分钟。在诱惑面前强制安排10分钟的等待时间。在这10分钟里，一定要时刻想着长远的奖励，抵抗住诱惑。&lt;/li&gt;
  &lt;li&gt;降低你的折扣率。当你受到诱惑，要做和长期利益相悖的事情时，请想一想，这个选择意味着，你为了即时的满足感放弃了更好的长期奖励。&lt;/li&gt;
  &lt;li&gt;预先对未来的自己做出承诺。做好拒绝诱惑的准备，让改变偏好变得更难，用奖励或威胁来激励未来的自己。&lt;/li&gt;
  &lt;li&gt;预见未来的自己。创造一个未来的回忆，给未来的自己发条消息，想象一下未来的自己。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;08-传染为什么意志力会传染&quot;&gt;&lt;span id=&quot;8&quot;&gt;08 传染：为什么意志力会传染？&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;坏习惯和积极的改变都能像细菌一样在人群中传播，而且没有人能完全不受其影响&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;社会中的个人&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;人生来就要和其他人产生联系，我们有专门的脑细胞管这件事，它名叫“镜像神经元”。它唯一的任务就是注意观察其他人在想什么，感觉如何，在做什么镜像神经元分布在整个大脑中，帮助我们立即其他人所有的经历。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;我们有模仿别人行动的本能&lt;/strong&gt;，这就意味着，当你看到别人去拿零食、饮料或信用卡的时候，你自己也会无意识地模仿他们的行为。同时，你也会失去自己的意志力。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;情绪传染。我们发现，自己的镜像神经元会对别人的疼痛产生反应，也会对别人的情绪产生反应。&lt;/strong&gt;（电视情景喜剧会添加笑声音轨）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;目标也能传染&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;“目标传染病”——我们&lt;strong&gt;很容易&lt;/strong&gt;感染别人的目标，从而改变自己的行为，但能够传染的目标，仅限于你已经拥有的或是和他人共有的目标。&lt;/li&gt;
      &lt;li&gt;目标传染在两个方向上都会起作用——你既可以感染自控，也可能感染自我放纵。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;“反抗控制”&lt;/strong&gt;——有时，看着别人屈服于诱惑，反而能增强我们的自控力。当你看到别人的行为和自己最大的目标发生冲突时，你的大脑就会处于高度警惕的状态。它会让你的目标更坚定，它还会寻找策略帮你坚守目标。&lt;/li&gt;
      &lt;li&gt;当你面对别人的目标是，增强免疫系统的最佳途径就是“在每天刚开始的时候花几分钟想想自己的目标，想想你会怎么受到诱惑，想要改变自己的目标。&lt;strong&gt;回想自己的目标能强化这个目标，避免你感染他人的目标。&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;你喜欢的人比陌生人更有传染性&lt;/strong&gt;
即便是朋友的朋友的朋友，也比你每天见到却不喜欢的人更有影响力。这点可以用免疫系统做个类比。只有当免疫系统发现那些人“和我们不同”时，它才会拒绝他们的目标和行为。事实证明，当我们想到我们喜爱、尊重的人和感觉相似的人时，我们的大脑会像对待自己一样对待他们，而不会把他们视为“别人”。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;社会认同——群体中的一员&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;当群体里的其他人都在做某件事时，我们很容易认为这件事是应该做的聪明事。（在节约能源调查中，最有用的劝说并不是像节约费用、造福后代之类的鼓励话，而是写着“据报道，在你的社区里，99%的人关掉了不需要的等来节约能源”的挂牌）&lt;/li&gt;
      &lt;li&gt;“社会认同”对支持行为调整起着重要作用。如果我们相信，戒掉恶习并培养新的美德会让我们在自己最重视的群体中站稳脚跟，我们获取会愿意这么做。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;当自控变得不正常时——和做正确的事相比，人们更愿意做大多数人都在做的事&lt;/strong&gt;
&lt;strong&gt;在说到“社会认同”时，我们认为别人做的事比别人实际做的更重要。&lt;/strong&gt;比如，大学生对身边同学普遍作弊的情况估计过高。要想知道一个学生有没有作弊，要看他是否相信别人也在作弊，而不是看作弊的惩罚是否严厉，也不是看他是否认为自己会被抓。当他们&lt;strong&gt;相信&lt;/strong&gt;自己的同学作了弊时，原本诚实的班级也会变成学生在考试中发信息，传答案的班级。
这对提高我们的自控力有着重要的指导意义——接触积极的社区、网络信息，甚至一份杂志，置身于和你共享承诺与目标的人们当中，会让你觉得自己的目标才是社会规范。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;“我应该”的力量&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;在考虑如何做出选择时，我们经常想象自己是别人评估的对象。研究发现，这为人们自控提供了强大的精神支持。预想自己实现目标（比如戒烟或献血）后会非常自豪的人，更有可能坚持到底并获得成功，预想自己的行为会受到谴责也很有效。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;“激情的自控”&lt;/strong&gt;——与讨论长期成本和收益的理性论证相比，自豪、羞愧等社会情感能更迅速、更直接地影响我们的选择。（如公布盗窃犯的照片等惩罚措施）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;羞愧的限度&lt;/strong&gt;
在为羞愧的力量欢呼之前，还应该注意一下“去他的”效应。想象羞愧等消极社会情感实现的自控，与真的感到惭愧而耗光意志力，还是存在微妙差异的。其实，糟糕的感觉会让人放弃抵抗。当这种糟糕的感觉以罪恶感和羞耻感的形式表现出来时，这种情况尤为明显。（赌徒输钱后，为了“赢回来”，而继续下更大的赌注）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;自豪感的力量&lt;/strong&gt;
表现出内疚感会减少心率的变化，降低意志力的生理储备。反之，自豪感会保持甚至增加这种储备。
&lt;strong&gt;为了让自豪感发挥作用，我们必须认为别人都在监视自己，或我们有机会向别人报告自己的成功。&lt;/strong&gt;（人们在公开场合更愿意购买绿色产品，比他们在私下网购时买的多）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;被踢出群体&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;我们最该警觉的行为，是避开那些不能按我们喜欢的方式自控的人。这不仅是一种对待别人的残酷做法，还是一种激励自己改变的糟糕策略。&lt;/li&gt;
      &lt;li&gt;人一旦被踢出群体，意志力就会耗竭。（少数民族越是受到歧视，自我控制能力也就越差）只要我们觉得被排斥或被冒犯，我们就有可能屈服于自己最糟糕的冲动。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-5&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;自控受到社会认同的影响，这使得意志力和诱惑都具有传染性。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-7&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;你的社交网络。在你的社交圈子里，有没有其他人和你有同样的意志力挑战？&lt;/li&gt;
  &lt;li&gt;你在模仿谁？睁大你的眼睛，寻找蛛丝马迹，看看你有没有模仿别人的行为。&lt;/li&gt;
  &lt;li&gt;你最可能从谁身上学到东西？谁是你“最亲密的别人”？又没有什么行为是你从他们身上学到的？或者说，他们有没有从你身上学到一些行为？&lt;/li&gt;
  &lt;li&gt;可别人都这么做！你有没有用社会认同来说服自己，说你的意志力挑战没什么大不了？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-7&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;增强你的免疫系统。为了避免重蹈别人意志力失效的覆辙，在每天刚开始的时候，花点时间想一想自己的目标。&lt;/li&gt;
  &lt;li&gt;感染自控力。当你需要一些额外的意志力时，给自己树立一个榜样。问问自己：那个意志力强人会怎么做？&lt;/li&gt;
  &lt;li&gt;自豪感的力量。公开你的意志力挑战，想象你在意志力挑战成功后将多么自豪。&lt;/li&gt;
  &lt;li&gt;把它变成集体项目。你能在意志力挑战上赢过其他人吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;09-别读这章我不要力量的局限性&quot;&gt;&lt;span id=&quot;9&quot;&gt;09 别读这章：“我不要”力量的局限性&lt;/span&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;讽刺性反弹效应&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;当人们试着不去想某件事时，反而会比没有控制自己的思维时想的更多，比自己有意去想的时候还要多。这个效应在人处于紧张、疲劳或烦乱状态时最为严重。&lt;/li&gt;
      &lt;li&gt;压抑人的本能，就会产生这种讽刺性反弹效应。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;压抑想法为何行不通？&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;心理学家韦格纳认为，这和大脑如何处理“不要去想”这个指令有关。大脑把这个指令分成两个部分，分别由两个不同系统去执行。一部分负责将人的注意力从被禁止的想法那里引开，这个过程为&lt;strong&gt;“操作”&lt;/strong&gt;。“操作”依靠大脑的自控系统来完成，和所有需要付出努力的自我控制一样，这需要耗费大量的精力和能量。另一部分则负责寻找证据，证明你没有去想、去感觉、去做你不该去想、去感觉、去做的事，这个过程为&lt;strong&gt;“监控”&lt;/strong&gt;。和前者不同，“监控”自动运行，无需耗费大量精力。所以，&lt;strong&gt;只要“操作”减弱了，“监控”就会成为自控的噩梦。&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;“我想的都是真的”&lt;/strong&gt;。当一个想法频繁出现、难以摆脱时，人们会很自然地认为它是需要关注的重要消息。例如，由于很容易记住涉及空难的新闻报道，人们往往会高估空难的可能性。事实上，发生空难的概率只有一千四百万分之一。&lt;/li&gt;
      &lt;li&gt;无论你想摆脱那种恐惧或欲望，它们最后都会变得更让人信服，更引人注目。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;避免讽刺性反弹&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;这个方法本身就很有讽刺意味——即&lt;strong&gt;放弃自控&lt;/strong&gt;。&lt;/li&gt;
      &lt;li&gt;允许你去想一件事，反而会减少你想其他的可能性。越是压抑消极的情绪，人越可能变得抑郁。韦格纳的第一个思维抑制试验表明，即使对健康的人来说，当被试者感到压力或觉得烦乱时，比起让他们去想这些事，不让他们去想这些事会更容易让他们情绪消沉。
另一个实验表明，人们试图摆脱自我批评的想法（“我真失败”，“大家都觉得我很蠢”）时，与坦率面对这种想法相比，他们的自尊心更容易受挫，情绪更容易变坏。即使当人们自认为已经摆脱了负面想法时，情况仍旧如此。&lt;/li&gt;
      &lt;li&gt;你可能很难理解这些发现，因为它们和“避开烦恼”的常识正好相反。如果不去消除这些不好的想法，我们又该怎么做呢？正如下面我们将要讨论的，&lt;strong&gt;如果想让自己远离精神痛苦，人们就需要与这些想法和平共处，而不是把他们推到一边。&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;呼吸训练法&lt;/strong&gt;：
遇到烦恼的时候，不妨先关注一下自己的想法，而不是先急着移注意力。然后，将注意力转移到你的身体感受上，看看你的肠胃、胸腔、咽喉或其他身体部位是否有感觉。一旦观察到这些想法和感觉，就把注意力转移到呼吸上。感受一下你是怎么吸气、呼气的。有时候，那些烦心的想法和感觉会随着呼吸自然消散。其他时候，它们将不停打断你对呼吸的关注。如果出现了这种情况，就把这些想法和感觉想象成飘过脑海和身体的浮云。不要停下呼吸，想象这些浮云不断消散或飘过。把呼吸想象成一阵风，它毫不费力地将这些浮云吹散、吹走。你无需让这些想法离开，只需保持呼吸的感觉。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;注意，这种方法和相信或思考某个想法是不同的。不要抑制想法，接受它的存在，但不要相信它。&lt;/strong&gt;你要接受的想法是：这些想法总是来来去去，你无法控制会出现什么想法，但你不必接受它的内容。换言之，你可以对自己说：“好吧，那种想法又来了，又得心烦。不过，这就是思维的运作方式，它并不一定意味着什么。”但不要对自己说：“好吧，我想这是真的。我真是个糟糕的人，糟糕的事会发生在自己身上，我想我要接受这一点。”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;把“我不要”变成“我想要”&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;比如把&lt;strong&gt;“不要迟到”&lt;/strong&gt;重新定义为&lt;strong&gt;“做第一个到的人”或“提前5分钟到”&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;驾驭冲动&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;当冲动/诱惑占据你的头脑时，花至少一分钟去感觉自己的身体。你的冲动是什么样的？是热的还是冷的？身体有没有感到不舒服？心率、呼吸或内脏有什么变化？保持这个状态至少一分钟，看看这些感觉在强度或特性上有什么变化？就像小孩子发脾气的时候一样，拒绝按自己的冲动行事，有时会增加一个人的紧张程度，试着接受这些感觉，而不是试图否认它们。当你使用“驾驭冲动”的技巧时，呼吸是很有帮助的，你可以去感受呼吸，体验吸入和呼出每一口气时的感觉，在此过程中了解自己的冲动。&lt;/li&gt;
      &lt;li&gt;当你第一次采取这个策略时，你可能一时驾驭住了冲动，但后来又故态复萌。如果你在最初的几次尝试中失败了，别灰心，这并不意味着这种方法是无效的。“驾驭冲动”和其他自控的新方法一样，都需要时间。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;对内接受自我，对外控制行动&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;当你试着开始接受欲望时，请记住，抑制欲望的反面不是自我放纵。不是简单的“想过把瘾就过把瘾吧”。&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;认识自我，关心自我和提醒自己真正重要的事物&lt;/strong&gt;，这三种方法正是自我控制的基石。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;核心思想-6&quot;&gt;核心思想&lt;/h4&gt;

&lt;p&gt;试图压抑自己的想法、情绪和欲望，只会产生相反的效果，让你更容易去想、去感受、去做你原本最想逃避的事。&lt;/p&gt;

&lt;h4 id=&quot;深入剖析-8&quot;&gt;深入剖析&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;观察“反弹”效应，看看你有没有想逃避的想法？压抑这些想法是否有效？试图摆脱某种想法，是否反而会让那种想法变得更强烈？&lt;/li&gt;
  &lt;li&gt;你最想得到的是什么？当你拼命试着把某件东西赶出脑海时，是不是反而对它产生了更强的渴望？&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;意志力实验-8&quot;&gt;意志力实验&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;忠于你的感受，但别相信的所有的想法。当你产生不快的想法时，将注意力转移到身体上，然后专注于呼吸，想象这些想法像浮云一样逐渐淡去。&lt;/li&gt;
  &lt;li&gt;直面自身欲望，但不要付诸行动。当欲望来袭时，注意到它、但不要马上试着转移注意力或与之争论。提醒自己“白熊”现象和“反弹”效应，记住你真正重要的目标。&lt;/li&gt;
  &lt;li&gt;驾驭冲动。当冲动一直存在时，与这些生理上的感觉共处，像驾驭海浪一样驾驭它，不要试图摆脱它，但也不要将冲动付诸行动。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;10-结语&quot;&gt;&lt;span id=&quot;10&quot;&gt;10 结语&lt;/span&gt;&lt;/h2&gt;

&lt;p&gt;人是多个自我的混合体。人的天性不仅包括了想即时满足的自我，也包括了目标远大的自我。我们生来就会受到诱惑，也能抵制诱惑。人类生来就能感觉到压力、恐惧或失控，但同时也能让自己平静下来，能掌控自己的选择。自控力的关键就是理解这些不同的自我，而不是从根本上改变我们自己。在追求自控的过程中，罪恶感、压力和羞愧是我们通常用来对付自己的武器，但都不起作用。自控力最强的人不是从与自我的较量中获得自控，而是学会了如何接受互相冲突的自我，并将这些自我融为一体。&lt;/p&gt;

&lt;p&gt;如果说真的有自控力秘诀，那么从科学角度来说确实有一个，那就是集中注意力。当你做出决定的时候，你需要训练自己的大脑，让它意识到这一点，而不是让它自行其是。你需要意识到，你是如何允许自己拖延的，你是如何用善行来证明自我放纵是合理的。你也需要意识到，奖励的承诺并非总能兑现；未来的你不是超级英雄，也不是陌生人。你需要看清，自己身处的世界，无论是销售陷阱，还是社会认同，都在影响你的行为。当你的注意力即将分散的时候，或者你即将向诱惑投降的时候，你需要静下心来，弄清楚自己的欲望。你需要记住自己真正想要的是什么，什么才能真的让你更快乐。“自我意识”能帮你克服困难，实现最重要的目标。这就是我能想到的对“意志力”最恰当的定义。&lt;/p&gt;
</description>
        <pubDate>Sun, 10 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/10/%E8%87%AA%E6%8E%A7%E5%8A%9B-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%BF%83%E7%90%86%E5%AD%A6/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/10/%E8%87%AA%E6%8E%A7%E5%8A%9B-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%BF%83%E7%90%86%E5%AD%A6/</guid>
        
        <category>心理学</category>
        
        
      </item>
    
      <item>
        <title>Sentre，永不下线——《电幻国度》</title>
        <description>&lt;p&gt;起初，上帝创造了神经元。电流通过脑中的三维神经细胞时，意识便产生了。在二十世纪的六十年代，神经元技术方面的唯一进步，就是具备了从大脑读取、复制信息并将信息输入大脑的能力。之后人类开始尝试通过神经刺激装置将多个人脑联系在一起，以期组成一个更高级的“大脑”——脑间智能。&lt;/p&gt;

&lt;p&gt;在九十年代，爆发了一场世界大战，战争期间出现了一些巨大的战争机器，它们被统称为“无人机”。无人机操纵员躲在后方，通过接入神经刺激装置控制无人机，从而极大的减少了伤亡。但奇怪的是，这些无人机操作员产下的孩子都是死胎，这也被称为“无人机的诅咒”。&lt;/p&gt;

&lt;p&gt;不可思议的是，一名无人机驾驶员，也就是女主人公的母亲，竟然生下了一名活着的男婴。军方为了破解“无人机的诅咒”，对这个男孩进行了三十多次的手术实验，然而结果却一无所获。之后，这名女驾驶员就被赶出了军队，之后的人生也十分悲惨。在医院中去世，女主角也与四岁的弟弟被迫分离。&lt;/p&gt;

&lt;p&gt;1996年，原本用于战争的技术开始转向民用，出现了一种可带给人一种虚拟体验的头盔——Sentre mode 6。然而97年之后，大部分带着这个头盔的人都不再愿意摘下这个头盔，完全沉浸于其中了，不吃不喝，而且也会产生一些身体上的异变，比如男人开始分泌出乳汁。更严重的是这种头盔会造成使用者精神上的崩溃。&lt;/p&gt;

&lt;p&gt;越来越多的人脑通过Sentre相联系，从而创建了一种巨大的意识，这种意识只有一种需求，即“赋形”。之前的死胎也是它们尝试“赋形”失败的结果。同时，一旦人通过精神刺激接触到这种意识时，便会深深陷入其中无法自拔。随着陷入这种精神依赖的人越来越多，文明也在不断崩溃。由于某些生理上的原因，女主角不能看到Sentre投射出的影像，因此没有陷入虚拟体验的灾难。&lt;/p&gt;

&lt;p&gt;本小说就在这样的背景下，讲述了女主角米歇尔和一个黄色机器人沿着美国公路，开着一辆偷来的车，流浪着、寻找着某些东西的故事。&lt;/p&gt;

&lt;h3 id=&quot;美国太平洋州莫哈韦沙漠1997年春&quot;&gt;美国，太平洋州，莫哈韦沙漠，1997年春&lt;/h3&gt;

&lt;p&gt;故事的一开始展示了漫天黄沙、遍布着枯骨的莫哈韦沙漠，令人震撼的是这么多的残骸可能并不是由战争等原因造成的，因为每个人头上都带着Sentre。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/0.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;米歇尔遇到了两个头戴Sentre，已经干枯的一对老年夫妇。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/1.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;开着车，沿15号州际高速公路行驶。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/2.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/3.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;城市被抛在身后，莫哈韦以北的395号公路如同尺子画出来的直线一般横穿这片荒凉地带，路上几乎看不见一辆车。米歇尔回想起曾经她的养父特德和养母比吉特曾经开车带她穿越了这片沙漠。当时他们对神经碱上瘾者嗤之以鼻，在车上甚至不允许米歇尔戴耳机。他们说这趟旅行的意义就在于聚在一起互相了解，度过一段可供回忆的“快乐时光”。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/4.jpg&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;山区&quot;&gt;山区&lt;/h3&gt;

&lt;p&gt;向西南方向行驶，进入阿尔派恩县，经过一串破败的城镇。这里突然出现了一种复合公寓，其能源似乎由回收的悬浮飞船引擎提供。这东西肯定是违法的，但在山脉东侧多风的高地，法律和秩序本就难觅踪影。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/6.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;在军事禁区，那些被遥控的机器正在山谷中游荡，穿越石头路面时，它们长长的无线电天线如同触角一般，在灌木丛上方摇来晃去。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/7.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;这一切是如何开始的呢？起初就像一种再正常不过的娱乐活动，然而Mode 6上市之后，事情开始古怪起来。自那以后，特德和比吉特就很少看电视了，家里也更安静了。有时候放学回家，他们还坐在客厅沙发上，头戴神经投影仪，就像木头人一样，完全没有了反应。当问起时他们似乎并不怎么担心，只承认最近花了很多时间玩投影仪。&lt;/p&gt;

&lt;p&gt;车外，黄色的维护机器人拖着巨大的缆线导轮，摇摇摆摆的穿过公路，看样子就像慢腾腾爬行的乌龟。它们身后拽着神经成像网络的缆线，从表皮粗糙的高山树林之间蜿蜒而来。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/9.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;如果人类智能形成于人脑中千亿脑细胞之间的相互作用，那将这个人脑与其他同样包含千亿脑细胞的人脑连接起来会发生什么？可以在神经元的层面上连接两个或者更多的大脑吗？如果可以的话，在这样一个大得多的神经网络之中，又会产生什么样的意识呢？&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/10.jpg&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;中央谷&quot;&gt;中央谷&lt;/h3&gt;

&lt;p&gt;离文明有序、状如密网的公路系统越来越近了。其实这些熟悉的景象并没有使米歇尔心情好转，毕竟连车带枪都是偷来的，万一被警察拦下就麻烦了。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/11.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/12.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;田野里，一台台闪烁的神经投影仪从黑暗中浮现出来。带着投影仪的人排着长队踽踽而行，看上去已筋疲力竭。在索斯特的最后几周里，米歇尔总是被这样的人群吵醒，他们拖着沉重的脚步，茫茫然沿街走来，仿佛一群不安的夜行动物正在返回郊区的巢穴。他们已成为巨大智能的一部分，他们是生是死，是否还有自己的意识？&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/13.jpg&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;海岸&quot;&gt;海岸&lt;/h3&gt;

&lt;p&gt;海湾远端被三艘突击舰占据。曾几何时，这些飞船乃是联邦军队的骄傲。它们排列在跑道上，舰长在数千观众的注视下总统握手。现在，它们沦落至此——被从天上揪下、拆空，任凭海水腐蚀冲刷，最后成为鸟儿的搭巢的悬崖。看看安菲翁飞船吧，它们曾满载空军的荣誉，现在却只是数千万吨的废铁，锈迹斑斑，布满鸟粪。&lt;/p&gt;

&lt;p&gt;我母亲就是被安菲翁飞船里的神经元装置烧坏了脑子的，所以我想它们这是罪有应得——米歇尔&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/14.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;无边无际的机器墓地。每转过一个弯，一排排没有尽头的废旧悬浮飞船和战斗无人机就会映入眼帘。有些机器身上都残留着战争留下的累累伤痕，其他机器多多少少还算完好，但飞船里里外外都有“刮料者”留下的痕迹。船壳上开着大洞，破损严重——装甲和设备被剥离了。有些飞船几乎被掏空，只剩下空壳倒在草地上，像没有内脏的鱼骨架。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/15.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;自制无人机在墓地的薄雾中移动。它们身上满是囊状物，正拖着缆线蹒跚而行。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/16.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;米歇尔母亲死后，被收养时曾认识了阿曼达。她也是米歇尔的倾诉对象，两人曾有过非常暧昧的接触，之后也搬走了。这位类似恋人的朋友的结局可能很悲惨——阿曼达搬走一年后，她的父亲来到米歇尔的家里，她的父亲是位牧师，他怀疑神经成像网络中传来的某种信号能致病，摧毁人们的意志，将其变为奴隶。当米歇尔问起阿曼达的近况时，一丝神圣而幸福的微笑漾过牧师的脸庞。他回答说，阿曼达的姑姑和姑父帮她重返了上帝之路。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/17.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;公路前方出了点状况：公路工程停顿下来——工人全都迷失在某种新型神经元装置营造的幻梦之中。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/18.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;当遇到停靠着的警车时，米歇尔心提了起来。但走近一看车内却空无一人，只有地上散落着的手枪和一些空弹壳。这些文明的象征已然成为了装饰。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/21.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;这是小说中一个给我印象非常深刻的情节：米歇尔从停车场醒来，看见附近一群头戴Sentre的人围着一个巨大的机器，大量的线缆从机器头部开口中伸出，落到地面，攀进一辆小货车的驾驶室里。米歇尔隐约看到驾驶室里有一个裸体女人的苍白躯体。她紧贴玻璃，双眼紧闭，面部因为高度亢奋而扭曲变形。大约十分钟之后，无人机迈出两大步，转过身，蹒跚着步入雾气之中。人群渐渐散去。过了一会，车内的女人也下了车——已经整理好了衣服，起身也融入雾中。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/22.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;那东西从迷雾中走出，它们平静而温和地从米歇尔的车前经过，在车后又汇聚成一个整体，不久便再次消失在雾霭之中。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/23.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/24.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;故事接近尾声，米歇尔和“蹦蹦”来到一个房子。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/25.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/26.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/27.jpg&quot; /&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/28.jpg&quot; /&gt;&lt;/div&gt;

&lt;p&gt;米歇尔抱紧了床上一个带着sentre，几乎没有什么生命迹象的躯体，这个小男孩就是她的弟弟，黄色的机器人也是由弟弟操控，引导着米歇尔来到此处。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/29.jpg&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;大海&quot;&gt;大海&lt;/h3&gt;

&lt;p&gt;故事的最后，在某处海岸边上，汽车在沙滩上压出的车辙灌满了海水，旁边丢弃着一个破旧的sentre和一个四分五裂的机器人。&lt;/p&gt;

&lt;p&gt;前面是一望无际灰暗的大海。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1544335576/iblog/The%20Electric%20State/30.jpg&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;后日谈&quot;&gt;后日谈&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;一千个人的眼中有一千种赛博朋克&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;其实我个人非常喜欢这种带着些阴暗、科幻元素的插画，如果追究细节的话，每幅画面背后都藏有一个耐人寻味的故事。&lt;/p&gt;

&lt;p&gt;小说不仅仅是站在米歇尔的角度去讲述，还有一个类似特工之类的人物角度，他一直跟随着米歇尔，包括从书中重复出现的一些场景也都有相应的暗示。在最后米歇尔和“蹦蹦”进入到弟弟所在的房屋时，给了房屋外面的一个干瘦的瘫在椅子上的人的特写，当然他也带着sentre。紧跟着这个特写之后就是探员举着枪追向房间的画面，这时突然从旁边草堆中站起一个巨大的机器人，机器人张开嘴扑向探员，之后就再也没有探员的视角了。这个情节也很有很大的想象空间，是弟弟操纵机器人袭击了探员吗，弟弟和院子里的人又是什么关系？这些问题书中并没有给出解释，这些叙事留白给了读者非常大的空间。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;文明的异化&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;小说中描述的世界并不是像尼尔机械纪元那样一片荒凉、完全机械化的场景，而讲的是人类社会在崩溃过程中的故事。更深刻一点，&lt;strong&gt;它并不完全只描绘了文明的崩溃，而是表现了一种文明异化的景象&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;一路上随处可见、不成比例的无人机，以及如同行尸走肉般的sentre沉溺者，看到他们仿佛就像文明已变成了一种新的东西。在废城废土的旅途上，米歇尔回忆起她的养父母——比吉特头戴着sentre溺死在水池底，特德伤心欲绝地抱着她湿漉的尸体。当医护人员将比吉特带走后，他恍惚了一会后又戴上了自己的神经投影仪，身体向后一靠，陷进了沙发。最后，特德也倒在了河畔，秃鹫吃光了他的大部分身体，但在神经投影仪的长角下，他依然嚅动着嘴巴，就像还在做梦一样。&lt;/p&gt;

&lt;p&gt;书中虽然有一些令人毛骨悚然画面，比如米歇尔路过一个烧焦的农场时，一个仓库里有一个带着笑脸、巨大的无人机弯下腰在门口给米歇尔挥手，但是实际一路上并没有遇到什么危险，作者没有塑造出一种“非我族类，虽远必诛”之类的绝望性氛围。它表达出了崩溃的人类社会和一种巨大的群体意识存在的一种协调性。我们甚至也可以认为这种群体意识催生的大量的机械之类的存在是一种进化的结果。那些倒在莫哈韦沙漠的干尸，他们有可能不是死亡了，而是在一种新的意识中“永生”了。这种情节设计让我不禁想起了《心理测量者》中的希比拉系统和《攻壳机动队》。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;没有开始，亦无结局&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在《电幻国度》令人震撼的画面中，确实还原了自己一些曾经对于科幻的想象，非常值得反复阅读。书中有着大量的留白，它没有完整地讲清楚一个故事，但是确实又完整的讲述了一个故事。&lt;/p&gt;

&lt;p&gt;没有开始，亦无结局。&lt;/p&gt;

</description>
        <pubDate>Mon, 10 Dec 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/12/10/sentre-%E6%B0%B8%E4%B8%8D%E4%B8%8B%E7%BA%BF/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/12/10/sentre-%E6%B0%B8%E4%B8%8D%E4%B8%8B%E7%BA%BF/</guid>
        
        <category>二次元</category>
        
        
      </item>
    
      <item>
        <title>从矩阵微分的角度推导BP算法（附代码）</title>
        <description>&lt;h2 id=&quot;1-矩阵的微分&quot;&gt;1. 矩阵的微分&lt;/h2&gt;

&lt;h3 id=&quot;11-函数矩阵的微分形式&quot;&gt;1.1 函数矩阵的微分形式&lt;/h3&gt;

&lt;p&gt;为简单起见，记 $\mathbf {e}_i$ 为第 $i$ 个分量为1，其余分量为0的单位列向量。&lt;/p&gt;

&lt;p&gt;对于 $\mathbf{X} \in \mathbb{R}^{m\times n}$，有 $m\times n$ 元函数 $f(\mathbf{X})$，定义 $f(\mathbf{X})$ 对 $\mathbf{X}$ 的导数为&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
\frac{df}{d\mathbf{X}} &amp;=&amp; \left( \frac{\partial f}{\partial \xi_{ij}} \right)_{m\times n} = \begin{bmatrix} \frac{\partial f}{\partial \xi_{11}} &amp; \cdots &amp; \frac{\partial f}{\partial \xi_{1n}} \\ \vdots &amp;&amp;\vdots \\ \frac{\partial f}{\partial \xi_{m1}}&amp;\cdots&amp;\frac{\partial f}{\partial \xi_{mn}} \end{bmatrix}\\
&amp;=&amp; \sum_{i=1}^m \sum_{j=1}^n \frac{\partial f}{\partial \xi_{ij}}\mathbf{e}_i\mathbf{e}_j^T
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;上式中 $\mathbf{e}_i$为 $m$ 维列向量，$\mathbf{e}_j$为 $n$ 维列向量。&lt;/p&gt;

&lt;h3 id=&quot;12-矩阵函数的微分形式&quot;&gt;1.2 矩阵函数的微分形式&lt;/h3&gt;

&lt;p&gt;结合1.1，定义矩阵 $\frac{d\mathbf{F}}{d \mathbf{X}} = \begin{bmatrix} \frac{\partial \mathbf{F}}{\partial \xi_{11}} &amp;amp; \cdots &amp;amp; \frac{\partial \mathbf{F}}{\partial \xi_{1n}} \ \vdots &amp;amp;&amp;amp;\vdots \ \frac{\partial \mathbf{F}}{\partial \xi_{m1}}&amp;amp;\cdots&amp;amp;\frac{\partial \mathbf{F}}{\partial \xi_{mn}} \end{bmatrix}$，对 $\mathbf{X}$ 的导数为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\frac{d\mathbf{F}}{d \mathbf{X}} = \begin{bmatrix} \frac{\partial \mathbf{F}}{\partial \xi_{11}} &amp; \cdots &amp; \frac{\partial \mathbf{F}}{\partial \xi_{1n}} \\ \vdots &amp;&amp;\vdots \\ \frac{\partial \mathbf{F}}{\partial \xi_{m1}}&amp;\cdots&amp;\frac{\partial \mathbf{F}}{\partial \xi_{mn}} \end{bmatrix}_{mr\times ns} \quad \text{其中 } \frac{d\mathbf{F}}{d \xi_{ij}} = \begin{bmatrix} \frac{\partial f_{11}}{\partial \xi_{ij}} &amp; \cdots &amp; \frac{\partial f_{1s}}{\partial \xi_{ij}} \\ \vdots &amp;&amp;\vdots \\ \frac{\partial f_{r1}}{\partial \xi_{ij}}&amp;\cdots&amp;\frac{\partial f_{rs}}{\partial \xi_{ij}} \end{bmatrix}_{r\times s} %]]&gt;&lt;/script&gt;

&lt;h3 id=&quot;13-一些重要性质&quot;&gt;1.3 一些重要性质&lt;/h3&gt;

&lt;p&gt;首先给出向量和矩阵求导的链式法则：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;若 $\mathbf{y}(\mathbf{x})$ 是 $\mathbf{x}$ 的向量值函数，则&lt;/li&gt;
  &lt;/ul&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial f(\mathbf{y}(\mathbf{x}))}{\partial \mathbf{x}}=\frac{\partial \mathbf{y}^T(\mathbf{x})}{\partial \mathbf{x}} \frac{\partial f(\mathbf{y})}{\partial \mathbf{y}}&lt;/script&gt;

  &lt;p&gt;式中 $\frac{\partial \mathbf{y}^T(\mathbf{x})}{\partial \mathbf{x}}$ 为 $n\times n$ 矩阵。&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;设 $\mathbf{A}$ 为 $m\times n$ 矩阵，且 $y=f(\mathbf{A})$ 和 $g(y)$ 分别是以矩阵 $\mathbf {A}$ 和标量 $y$ 为变元的实值函数，则&lt;/li&gt;
  &lt;/ul&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial g(f(\mathbf{A}))}{\partial \mathbf{A}}=\frac{dg(y)}{dy}\frac{\partial f(\mathbf{A})}{\partial \mathbf{A}}&lt;/script&gt;

&lt;/blockquote&gt;

&lt;p&gt;总结一下：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
f(\mathbf{t})=f(\mathbf{x(\mathbf{t})}) &amp;\rightarrow&amp; df=d\mathbf{x}^Tdf\\
\mathbf{f}(\mathbf{t})=\mathbf{f}(\mathbf{x(\mathbf{t})}) &amp;\rightarrow&amp; d\mathbf{f}=d\mathbf{f}d\mathbf{x}
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;p&gt;下面介绍两个在推导 BP 算法时用到的性质：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;性质1&lt;/strong&gt;    $\mathbf{y}=\mathbf{W}\mathbf{x}$，函数 $f(\mathbf{y})$ 是向量 $\mathbf{y}$ 的函数，其中 $\mathbf{W}\in C^{m\times n}$ 和 $\mathbf{x}\in C^n$ 无关,则有&lt;/p&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{d\mathbf{y}^T}{d\mathbf{x}}=\mathbf{W}^T,\quad\frac{d(f(\mathbf{y}))}{d\mathbf{W}}=\frac{d(f(\mathbf{y}))}{d\mathbf{y}}\cdot \mathbf{x}^T&lt;/script&gt;

&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;证明：&lt;/strong&gt;观察到$\frac{d\mathbf{x}^T}{d\mathbf{x}}=\mathbf{I}$，则有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
\frac{d\mathbf{y}^T}{d\mathbf{x}}&amp;=&amp;\frac{d\mathbf{x}^T\mathbf{W}^T}{d\mathbf{x}}=\frac{d\mathbf{x}^T}{d\mathbf{x}}\mathbf{W}^T=\mathbf{W}^T \\
\frac{d(f(\mathbf{y}))}{d\mathbf{W}}&amp;=&amp;\frac{d(f(\mathbf{y}))}{d\mathbf{y}}\frac{d\mathbf{y}}{d\mathbf{W}} \\
&amp;=&amp; \frac{d(f(\mathbf{y}))}{d\mathbf{y}}\cdot \mathbf{x}^T
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;性质2&lt;/strong&gt;    设 $f(\mathbf{x})$ 是向量 $\mathbf{x}$ 的函数，而 $\mathbf{x}$ 又是 $\mathbf{u}$ 的函数，则有&lt;/p&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{df}{d\mathbf{u}}=\frac{d\mathbf{x}^T}{d\mathbf{u}}\cdot\frac{df}{d\mathbf{x}}&lt;/script&gt;

  &lt;p&gt;根据1.2中定义，有 $\frac{d\mathbf{x}^T}{d\mathbf{u}}=\left(\frac{d\mathbf{x}^T}{du_1},\frac{d\mathbf{x}^T}{du_2},\ldots, \frac{d\mathbf{x}^T}{du_n}  \right)^T$，其中 $\frac{d\mathbf{x}^T}{du_i}=\left( \frac{dx_1}{du_i}, \frac{dx_2}{du_i},\ldots, \frac{dx_n}{du_i} \right)$。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;证明：&lt;/strong&gt;由雅可比矩阵的传递性可知&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial \mathbf{f}}{\partial \mathbf{u}}=\frac{\partial \mathbf{f}}{\partial \mathbf{x}}\frac{\partial \mathbf{x}}{\partial \mathbf{u}}&lt;/script&gt;

&lt;p&gt;再根据 $f$ 退化成实数时雅克⽐矩阵和函数导数的关系，有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial \mathbf{f}}{\partial \mathbf{x}}=\frac{\partial {f}}{\partial \mathbf{x}^T}, \quad\frac{\partial \mathbf{f}}{\partial \mathbf{u}}=\frac{\partial f}{\partial \mathbf{u}^T}&lt;/script&gt;

&lt;p&gt;将上面三式结合，可得到如下链式法则&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
\frac{\partial f}{\partial \mathbf{u}^T} &amp;=&amp; \frac{\partial {f}}{\partial \mathbf{x}^T}\frac{\partial \mathbf{x}}{\partial \mathbf{u}}\\
&amp;\downarrow&amp; 等号两边同时转置 \\
\frac{df}{d\mathbf{u}} &amp;=&amp; \frac{d\mathbf{x}^T}{d\mathbf{u}}\cdot\frac{df}{d\mathbf{x}}
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;推广：&lt;/strong&gt;类似的，若 $\mathbf{u}$ 是 $\mathbf{v}$ 的向量值函数，则有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{df}{d\mathbf{v}}=\frac{d\mathbf{u}^T}{d\mathbf{v}}\cdot\frac{d\mathbf{x}^T}{d\mathbf{u}}\cdot\frac{df}{d\mathbf{x}}&lt;/script&gt;

&lt;h2 id=&quot;2-bp算法推导的矩阵形式&quot;&gt;2. BP算法推导的矩阵形式&lt;/h2&gt;

&lt;p&gt;考虑如下三层前馈神经网络的回归问题：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img width=&quot;200px&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1541658478/iblog/matrix-differential-to-BP/matrix-differential-to-BP-1.png&quot; /&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;输入层：输入 $\mathbf{x}$&lt;/li&gt;
  &lt;li&gt;隐含层：连接权重为 $\mathbf{W}_1$ ，激活函数为 $\varphi (\cdot)$ ，该层输入为 $\mathbf{z}_1=\mathbf{W}_1\mathbf{x}$，输出为 $\mathbf{h}=\varphi(\mathbf{z}_1)$&lt;/li&gt;
  &lt;li&gt;输出层：连接权重为 $\mathbf{W}_2$ ，该层输入为 $\mathbf{z}_2=\mathbf{W}_2\mathbf{h}$，输出为 $\mathbf{o}=\mathbf{z}_2$&lt;/li&gt;
  &lt;li&gt;损失函数： $e=\frac{1}{2}||\mathbf{y}-\mathbf{o}||_2$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们的目标是求解 $\frac{de}{d\mathbf{W}_1},\frac{de}{d\mathbf{W}_2}$。求解过程如下：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
\frac{de}{d\mathbf{o}} &amp;=&amp; \mathbf{o}-\mathbf{y} \\
\frac{de}{d\mathbf{W}_2} &amp;=&amp; \frac{de}{d\mathbf{z_2}} \mathbf{h}^T \\
&amp;=&amp; \frac{d\mathbf{o}^T}{d\mathbf{z}_2} \frac{de}{d\mathbf{o}} \mathbf{h}^T \\
&amp;=&amp;  (\mathbf{o}-\mathbf{y})\mathbf{h}^T \\
\frac{de}{d\mathbf{W}_1} &amp;=&amp; \frac{de}{d\mathbf{z_1}} \mathbf{x}^T \\
&amp;=&amp; \frac{d\mathbf{h}^T}{d\mathbf{z}_1} \frac{d\mathbf{z}_2^T}{d\mathbf{h}} \frac{de}{d\mathbf{z}_2} \mathbf{x}^T \\
&amp;=&amp; \text{diag}(\varphi'(z_{1_i})) \mathbf{W_2}^T \frac{de}{d\mathbf{z}_2} \mathbf{x}^T \\
&amp;=&amp; \text{diag}(\varphi'(z_{1_i})) \mathbf{W_2}^T (\mathbf{o}-\mathbf{y}) \mathbf{x}^T
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;p&gt;通过上面推导，我们可以得到逐层误差之间的关系。定义 $\delta_3=\mathbf{o}-\mathbf{y},\delta_2=\frac{de}{d\mathbf{z}_2},\delta_1=\frac{de}{d\mathbf{z}_1}$，则：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray*}
\delta_2 &amp;=&amp; \delta_3 \\
\delta_1 &amp;=&amp; \text{diag}(\varphi'(z_{1_i}))\mathbf{W}_2^T\delta_2
\end{eqnarray*} %]]&gt;&lt;/script&gt;

&lt;p&gt;得到梯度后，可以利用随机梯度下降（Stochastic gradient descent）更新模型：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;init $W_1, W_2$&lt;/li&gt;
  &lt;li&gt;for j=1 to $T$ &lt;br /&gt;
​    　for each sample $( \textbf{x}_i, y_i)$&lt;br /&gt;
​    　　calc   　$\frac{de}{d\mathbf{W}_1},\frac{de}{d\mathbf{W}_2}$&lt;br /&gt;
​    　　update　$\mathbf{W}_1 \leftarrow \mathbf{W}_1 - \gamma\frac{de}{d\mathbf{W}_1},\mathbf{W}_2 \leftarrow \mathbf{W}_2 - \gamma\frac{de}{d\mathbf{W}_2}$&lt;br /&gt;
​    　stop until convergence&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;3-numpy实现&quot;&gt;3. Numpy实现&lt;/h2&gt;

&lt;p&gt;基于 MNIST 实现手写数字识别。&lt;/p&gt;

&lt;p&gt;设置三层全连接网络，输入层神经元数量为784，隐含层神经元数量为500，输出层神经元数量为10。&lt;/p&gt;

&lt;p&gt;注意隐含层激活函数为 ReLU，输出层激活函数为 Softmax ，重点关注下计算梯度的代码：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;backward&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;probs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;probs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;probs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dw2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;db2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[:,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newaxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dw1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;db1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[:,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newaxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可以看到&lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt;对应 $\delta_2$，&lt;code class=&quot;highlighter-rouge&quot;&gt;e1&lt;/code&gt;对应 $\delta_1$ 。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/iworldtong/ML-and-DL-notes/blob/master/DL/mlp/mnist_mlp_np.py&quot;&gt;完整代码&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;4-参考资料&quot;&gt;4. 参考资料&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;《矩阵分析与应用》张贤达&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25063314&quot;&gt;机器学习中的矩阵/向量求导&lt;/a&gt; —— 对矩阵求导的介绍很完整&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Fri, 09 Nov 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/11/09/matrix-differential-to-BP/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/11/09/matrix-differential-to-BP/</guid>
        
        <category>Deep Learning</category>
        
        
      </item>
    
      <item>
        <title>课程安排问题——从一道Google面试题看动态规划与贪心算法的关系</title>
        <description>&lt;p&gt;对于许多优化问题，使用动态规划算法来求解最优解并非是最高效的，可以使用更简单、高效的&lt;strong&gt;贪心算法&lt;/strong&gt;（greedy algorithm），它在每一步都做出当时看起来最佳的选择，也就是说，它总是做出局部最优解，并希望通过这样的方式找到全局最优解。&lt;/p&gt;

&lt;p&gt;本文将通过实例简单说明一下贪心算法与动态规划之间的关系。课程安排问题是软件所的一位师兄参加 Google 面试遇到的，要求用 DP 方法解答，而之前在国科大算法课上卜老师已经将这种方法讲解过了，可喜可贺 d(^_^o)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;加权课程安排问题&lt;/strong&gt;：教务处给某一个教室安排课程，有很多老师都想来这个教室教授他们各自的课。假如第 $i$ 位老师讲的第 $A_i$ 门课程共有 $W_i$ 个学生选课，课程开始时间 $S_i$ ,结束时间为 $F_i$ ，上课时间为 $[S_i,F_i)$ 。那么教务处的老师如何安排课程，使得来这间教室上课的人数最多？&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;1-动态规划加权课程安排问题的最优子结构&quot;&gt;1. 动态规划——加权课程安排问题的最优子结构&lt;/h2&gt;

&lt;p&gt;举个例子，有如下9门课程：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;180px&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1541605326/iblog/greedy2dp/greedy2dp-1.png&quot; /&gt;&lt;/div&gt;

&lt;h3 id=&quot;一个比较直观的动态规划算法&quot;&gt;一个比较直观的动态规划算法&lt;/h3&gt;

&lt;p&gt;设最优解的形式为 $X=[x_1,x_2,\ldots,x_9]$，$x_i=1$ 代表课程被安排，否则不安排。&lt;/p&gt;

&lt;p&gt;对于 $n$ 个课程，直接求解并不容易，所以观察原问题是否可以被分解为规模更小的子问题。我们可以把求解过程看成一系列决策过程：在每个决策步上，选择一个课程加入排课表中。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;分析：&lt;/strong&gt;现在考虑求最优解的第一个决策，此时最多有 $n$ 种选择，若选择了 $A_i$ ，则同时需要把与 $A_i$ 冲突的所有课程从 $S$ 中移除。以此类推进行下一步决策。这样就将问题分解成了 $n$ 个子问题。&lt;/p&gt;

&lt;p&gt;综合当前决策步的所有情况，可以得到递归表达式，设最多上课人数为 $OPT(S)$，则有：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\begin{eqnarray}
OPT(S)=\max_{A_i\in S} \left\{ OPT(S')+W_i \right\}
\end{eqnarray}&lt;/script&gt;

&lt;p&gt;其中 $S’$ 表示不与 $A_i$ 冲突的所有课程集合（包含 $A_i$ ）。&lt;/p&gt;

&lt;p&gt;该算法的计算复杂度为 $O(2^n)$。&lt;/p&gt;

&lt;h3 id=&quot;改进&quot;&gt;改进&lt;/h3&gt;

&lt;p&gt;上面算法在求解 $S’$ 时有大量的冗余计算，因此计算复杂度比较高。&lt;/p&gt;

&lt;p&gt;添加一步非常重要的操作：为使子问题分解变得更加有序，&lt;strong&gt;首先将课程按结束时间排序&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;分析：&lt;/strong&gt;先DandC，然后DP。假设我们已经得到了最优解，那么最优解中最后一项是哪门课程 ？&lt;/p&gt;

&lt;p&gt;如果最后安排 $A_9$ ，则时间冲突的 $A_8$ 肯定不能被安排，剩下的只需在 $A_1-A_7$ 中选择，如下图：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150px&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1541605326/iblog/greedy2dp/greedy2dp-2.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;也就是说选择 $A_9$ 后，问题变成了 $n=7$ 的课程安排问题，这样可以继续缩小问题规模。现在考察另一种可能：如果不安排 $A_9$ ，则剩下的需在 $A_1-A_8$ 中选择。如下图：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150px&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1541605326/iblog/greedy2dp/greedy2dp-3.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;现在就可以写出递归表达式了：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray}
OPT(i)=\max \left \{ \begin{aligned} &amp;OPT(pre(i)) + W_i&amp; \quad \text{安排第$i$门课} \\ &amp;OPT(i-1)&amp; \quad \text{不安排第$i$门课} \end{aligned} \right.
\end{eqnarray} %]]&gt;&lt;/script&gt;

&lt;p&gt;其中 $pre(i)$ 为在第 $i$ 门课开始之前结束的课程，有 $F_{pre(i)} \leqslant S_i$ 。&lt;/p&gt;

&lt;p&gt;Python 实现：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;coursesScheduling_DP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;'''
    Input: courses shape: n x 4 (id,S,F,W)
    Output: Maximum number of students
    '''&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        
    &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bisect&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;pre_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bisect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bisect_right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pre_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coursesScheduling_DP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;最多上课人数：&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;运行结果为最多选课人数为 15 。&lt;/p&gt;

&lt;p&gt;上面算法排序复杂度为 $O(n\log n)$，动态规划复杂度为 $O(n)$，因此总复杂度为 $O(n\log n)$。&lt;/p&gt;

&lt;h2 id=&quot;2-贪心选择&quot;&gt;2. 贪心选择&lt;/h2&gt;

&lt;p&gt;假如我们无需求解所有子问题就可以选择出一个课程加入到最优解中，将会怎样？这将使我们省去递归式（1）中考察所有选择的过程，这就引入了贪心选择。&lt;/p&gt;

&lt;p&gt;首先考虑下面的问题，对其使用 DP 就并不是高效的解法：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;非加权课程安排问题：&lt;/strong&gt;假设每个课程的选课人数都为1。我们的任务还是和原来一样，选择一些不冲突的课程，让来该教室上课的学生人数最多。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;对于简化后的课程安排问题，直观上，我们应该选择这样一门课，选出它后剩下的资源应该能被尽量多的其他课程所用。现在考虑可选课程，其中必然有一个最先结束。因此，直觉告诉我们应该选择 $S$ 中最早结束的课程，因为它剩下的资源可供它之后尽量多的课程使用。（如果 $S$ 中最早结束的课程有多个，可以选择其中任意一个）换句话说，由于课程已经按结束时间单调递增的顺序排列，贪心选择就是选择 $a_1$ 。（&lt;strong&gt;当然，选择最早结束的课程并不是本问题唯一的贪心选择方法&lt;/strong&gt;）&lt;/p&gt;

&lt;p&gt;下面证明我们的直觉是正确的，即&lt;strong&gt;贪心选择——最早结束的活动——总是最优解的一部分&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;证明：&lt;/strong&gt;设当前所有可选择课程集合为 $S$ ，其最早下课的课程是 $A_1$ ，$X_k$ 为最优解的课程集合，其最早下课的课程是 $A_k$ 。若 $A_1 \neq A_k$ ，则设另一个解 $X’=X-{ A_k } \cup { A_1}$ 。$X’$ 的意义是将 $X$ 中的 $A_k$ 换为 $A_1$ ，同样可知 $X’$ 内无冲突元素，且 $X’$ 与 $X$ 元素个数相等，因此 $X’$ 也是最优解，其最早结束的课程也为 $S$ 中最早结束的课程。&lt;/p&gt;

&lt;p&gt;因此，假如 $A_i$ 下课最早，那么它肯定会出现在最优解。首先我们选最早下课的课程 $A_1$ ，接下来的问题就是在蓝色的方框里面选最优解就行，如此递归。见下图：&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;&lt;img height=&quot;150px&quot; src=&quot;https://res.cloudinary.com/dzu6x6nqi/image/upload/v1541605326/iblog/greedy2dp/greedy2dp-4.png&quot; /&gt;&lt;/div&gt;

&lt;p&gt;Python 实现：&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;simpleScheduling_Greedy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;previous_f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;previous_f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;courses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;同理，对原课程安排问题，根据贪心选择得到的递归表达式为：&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{eqnarray}
OPT(i)=\max \left \{ \begin{aligned} &amp;OPT(pre(i)) + W_i&amp; \quad \text{安排第$i$门课} \\ &amp;OPT(i-1)&amp; \quad \text{不安排第$i$门课} \end{aligned} \right.
\end{eqnarray} %]]&gt;&lt;/script&gt;

&lt;p&gt;其中 $pre(i)$ 是表示第 $i$ 门课程开始时已经结束的课程。&lt;/p&gt;

&lt;h2 id=&quot;3-dp-vs-greedy&quot;&gt;3. DP vs Greedy&lt;/h2&gt;

&lt;p&gt;总结 DP 与 Greedy 的异同点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;相似&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;都应用于优化问题&lt;/li&gt;
      &lt;li&gt;都有相应的优化子结构（Optimal substructure）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;每个 Greedy 背后，几乎都有一个更笨拙的 DP&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;不同&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;DP：在每个决策步上通常会&lt;strong&gt;枚举&lt;/strong&gt;所有可能的选择，并且要求&lt;strong&gt;子问题已经被解决&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;Greedy：不需枚举所有可能——不考虑子问题，直接采取&lt;strong&gt;局部最优&lt;/strong&gt;决策 （注意：这里的“局部”意味着我们已经获得了最优解的一部分，并且这部分知识已经足够我们做出一个合适的决策）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 08 Nov 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/11/08/greedy2dp/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/11/08/greedy2dp/</guid>
        
        <category>算法</category>
        
        
      </item>
    
  </channel>
</rss>
